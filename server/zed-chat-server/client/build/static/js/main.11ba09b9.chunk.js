(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,a){},107:function(e,t,a){},110:function(e,t,a){},123:function(e,t,a){},158:function(e,t,a){e.exports=a(209)},170:function(e,t,a){},174:function(e,t,a){},197:function(e,t){},200:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},206:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),s=(a(107),a(20)),l=a(3),i=a(150),m=function(e){var t=e.component,a=e.auth,n=Object(i.a)(e,["component","auth"]);return r.a.createElement(s.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(s.a,{to:"/login"})}}))},u=a(25),d=Object(u.b)({name:"account",initialState:{email:"",tagName:"",loggedIn:!1,id:""},reducers:{clearAccount:function(e){e.email="",e.tagName="",e.loggedIn=!1,e.id=""},setEmail:function(e,t){e.email=t.payload},setTagName:function(e,t){e.tagName=t.payload},login:function(e){e.loggedIn=!0},logout:function(e){e.loggedIn=!1},setId:function(e,t){e.id=t.payload}}}),g=d.actions,p=g.clearAccount,f=g.setId,b=g.setEmail,h=g.setTagName,v=g.login,E=g.logout,y=function(e){return{id:e.account.id,email:e.account.email,tagName:e.account.tagName,loggedIn:e.account.loggedIn}},x=d.reducer,N=a(15),w=a(39),O=a(2),j=a(11),k=a.n(j),C=a(23),S=a(245),A=a(246),I=a(247),R=a(248),M=a(270),W=a(128),T=a(249),H=a(24),P={tagNameSearch:/^([a-zA-Z0-9_-]){1,20}$/,tagName:/^([a-zA-Z0-9_-]){8,20}$/,password:/^([a-zA-Z0-9\_\-\$\#\%\^\&\*\(\)]){8,32}$/,email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,firstName:/^([A-Z]){1}([a-zA-Z]){1,32}$/,lastName:/^([A-Z]){1}([a-zA-Z]){1,32}$/,messageBody:/^(.){1,200}$/,conversationName:/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]){4,64}$/},B=(a(170),Object(u.b)({name:"auth",initialState:{username:"",token:""},reducers:{setUserName:function(e,t){e.username=t.payload},setToken:function(e,t){e.token=t.payload},clearAuth:function(e){e.username="",e.token=""}}})),D=B.actions,L=D.clearAuth,z=(D.setUserName,D.setToken,function(e){return e.auth.token}),q=B.reducer,F=a(78),J=Object(u.b)({name:"conversations",initialState:{conversations:[],currentConversation:{messages:[],joined:!1,typing:!1,id:0},defaultView:!0,showConvList:!1},reducers:{clearConversations:function(e){e.conversations=[],e.currentConversation={messages:[],joined:!1,typing:!1,id:0},e.defaultView=!0,e.showConvList=!1},addConversation:function(e,t){e.conversations.filter((function(e){return e.id===t.payload.conversation.id})).length>0?console.log("Error: cannot add conversation because one already exists in store"):e.conversations.push(t.payload.conversation)},removeConversation:function(e,t){e.conversations=e.conversations.filter((function(e){return e.id!==t.payload.id}))},setCurrentConversation:function(e,t){e.conversations.filter((function(e){return e.id===t.payload.conversation.id})).length<1?console.log("Error: cannot set current conversation to a conversation that doesn't exist in the store"):e.currentConversation=t.payload.conversation},addMessage:function(e,t){var a,n=Object(F.a)(e.conversations,(function(e){})),r=Object(N.a)(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.id===t.payload.conversation.id){if(!Array.isArray(o.messages)){console.log("Messages don't exist yet"),o.messages=[],o.messages.push(t.payload.message),o.numberOfMessages<o.messages.length&&(o.numberOfMessages=o.messages.length);break}if(o.messages.filter((function(e){return e.id===t.payload.message.id})).length>0){console.log("Error: Cannot add message because it already exists in the state!");break}if(o.id===e.currentConversation.id){Array.isArray(e.currentConversation.messages)&&e.currentConversation.messages||(e.currentConversation.messages=[]),e.currentConversation.messages.push(t.payload.message),e.currentConversation.numberOfMessages<e.currentConversation.messages.length&&(e.currentConversation.numberOfMessages=e.currentConversation.messages.length);break}if(Array.isArray(o.messages)){o.messages.push(t.payload.message),o.numberOfMessages<o.messages.length&&(o.numberOfMessages=o.messages.length);break}}}}catch(c){r.e(c)}finally{r.f()}e.conversations=Object(F.a)(n,(function(e){}))},removeMessage:function(e,t){var a=t.payload,n=a.conversationId,r=a.messageId;(e.currentConversation=n)&&(e.currentConversation.messages=e.currentConversation.messages.filter((function(e){return e.id!==r})));var o,c=Object(N.a)(null===e||void 0===e?void 0:e.conversations);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.id===n&&(s.messages=s.messages.filter((function(e){return e.id!==r})))}}catch(l){c.e(l)}finally{c.f()}},setJoined:function(e,t){e.currentConversation.joined=t.payload},setRead:function(e,t){var a=e.conversations.filter((function(e){return e.id===t.payload.convId}))[0];if(a){var n=a.messages.filter((function(e){return e.id===t.payload.messageId}))[0];n&&(n.read=!0)}},setTyping:function(e,t){e.currentConversation.typing=t.payload},setView:function(e,t){e.defaultView=t.payload},setShowConvList:function(e,t){e.showConvList=t.payload},sortMessages:function(e,t){e.currentConversation.messages.length>1&&e.currentConversation.messages.sort((function(e,t){return Date.parse(e.createdAt)-Date.parse(t.createdAt)}))},pinMessage:function(e,t){var a,n=Object(N.a)(e.conversations);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(t.payload.conversation.id===r.id){var o,c=Object(N.a)(r.messages);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.id===t.payload.id&&(s.pinned=t.payload.pinned)}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){n.e(l)}finally{n.f()}},batchAddMessages:function(e,t){var a,n=t.payload,r=n.messages,o=n.conversationId,c=Object(N.a)(r);try{for(c.s();!(a=c.n()).done;){var s=a.value;s.conversation.id===e.currentConversation.id&&e.currentConversation.id===o&&(e.currentConversation.messages.push(s),e.currentConversation.numberOfMessages<e.currentConversation.messages.length&&(e.currentConversation.numberOfMessages=e.currentConversation.messages.length))}}catch(l){c.e(l)}finally{c.f()}}}}),Z=J.actions,Y=Z.batchAddMessages,$=(Z.removeMessage,Z.sortMessages),U=Z.setShowConvList,V=Z.clearConversations,_=Z.setView,K=Z.setTyping,G=Z.setRead,X=(Z.setJoined,Z.addMessage),Q=Z.setCurrentConversation,ee=Z.addConversation,te=Z.removeConversation,ae=Z.pinMessage,ne=function(e){return e.conversations.conversations},re=function(e){return e.conversations.currentConversation},oe=function(e){return e.conversations.defaultView},ce=function(e){return e.conversations.showConvList},se=J.reducer,le=Object(u.b)({name:"invite",initialState:{sentInvites:[],receivedInvites:[],acceptedInvites:[]},reducers:{clearInvites:function(e){e.sentInvites=[],e.receivedInvites=[],e.acceptedInvites=[]},addSentInvite:function(e,t){e.sentInvites.push(t.payload)},addReceivedInvite:function(e,t){e.receivedInvites.push(t.payload)},removeSentInvite:function(e,t){e.sentInvites=e.sentInvites.filter((function(e){return e.id!==t.payload}))},removeReceivedInvite:function(e,t){e.receivedInvites=e.receivedInvites.filter((function(e){return e.id!==t.payload}))},addAcceptedInvite:function(e,t){e.acceptedInvites.push(t.payload)}}}),ie=le.actions,me=ie.clearInvites,ue=(ie.addSentInvite,ie.addReceivedInvite),de=(ie.removeSentInvite,ie.removeReceivedInvite,ie.addAcceptedInvite),ge=function(e){return e.invite.receivedInvites},pe=function(e){return e.invite.acceptedInvites},fe=le.reducer,be=Object(u.b)({name:"friends",initialState:{friends:[],friendRequests:[]},reducers:{clearFriends:function(e){e.friendRequests=[],e.friends=[]},addFriend:function(e,t){e.friends.filter((function(e){return e.id===t.payload.id||e.tagName===t.payload.tagName})).length>0||(t.payload.password&&delete t.payload.password,e.friends=[].concat(Object(w.a)(e.friends),[t.payload]))},removeFriend:function(e,t){e.friends=e.friends.filter((function(e){return e.id!==t.payload}))},addFriendRequest:function(e,t){e.friendRequests.filter((function(e){return e.id===t.payload.id})).length>0||(e.friendRequests=[].concat(Object(w.a)(e.friendRequests),[t.payload]))},removeFriendRequest:function(e,t){e.friendRequests=e.friendRequests.filter((function(e){return e.id!==t.payload}))},declineRequest:function(e,t){var a=e.friendRequests.filter((function(e){return e.id===t.payload}))[0];a&&(a.cancelled=!0)},acceptRequest:function(e,t){var a=e.friendRequests.filter((function(e){return e.id===t.payload}))[0];a&&(a.accepted=!0)}}}),he=be.actions,ve=he.clearFriends,Ee=he.addFriend,ye=(he.removeFriend,he.addFriendRequest),xe=(he.removeFriendRequest,he.declineRequest,he.acceptRequest,function(e){return e.friends.friends}),Ne=function(e){return e.friends.friendRequests},we=be.reducer,Oe="hidden",je="show",ke="full",Ce=Object(u.b)({name:"ui",initialState:{sidebarState:"hidden",topbarMessage:"",accountBackground:"",backgroundColor:"#191919",backgroundTint:"transparent",conversationBackground:"mthood"},reducers:{setSidebarState:function(e,t){switch(t.payload){case t.payload===Oe&&e.sidebarState!==Oe:e.sidebarState=Oe;break;case t.payload===je&&e.sidebarState!==je:e.sidebarState=je;break;case t.payload===ke&&e.sidebarState!==ke:e.sidebarState=ke;break;default:e.sidebarState=je}},setTopbarMessage:function(e,t){e.topbarMessage=t.payload},setDefaultBackground:function(e,t){e.defaultBackground=t.payload},setColor:function(e,t){e.backgroundColor=t.payload},setTint:function(e,t){e.backgroundTint=t.payload},setConversationBackground:function(e,t){e.conversationBackground=t.payload}}}),Se=Ce.actions,Ae=(Se.setSidebarState,Se.setTopbarMessage),Ie=(Se.setDefaultBackground,Se.setColor,Se.setTint,Se.setConversationBackground,function(e){return e.ui.sidebarState}),Re=function(e){return e.ui.topbarMessage},Me=Ce.reducer,We=(a(171),function(){var e=Object(C.a)(k.a.mark((function e(t,a){var n,r,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify({tagName:"".concat(t),password:"".concat(a)}),e.next=3,fetch("http://localhost:3000/api/auth/login",{body:n,headers:{"content-type":"application/json","Access-Control-Allow-Origin":"localhost:3003"},method:"POST",credentials:"include"});case 3:return r=e.sent,console.log(r),e.next=7,r.json();case 7:if(401!==(o=e.sent).statusCode&&400!==o.statusCode){e.next=10;break}return e.abrupt("return",!1);case 10:if(500!==o.statusCode){e.next=13;break}return console.log("Server error while attempting login!"),e.abrupt("return",!1);case 13:if(!(o.id&&o.user&&o.invites)){e.next=19;break}return console.log("Successfully logging in user",o.user.tagName),console.log(o),e.abrupt("return",{user:o.user,id:o.id,invites:o.invites});case 19:return console.log("Error retrieving login token from server! Malformed body!",o),e.abrupt("return",!1);case 21:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),Te=function(e,t,a){return!!(e&&t&&(null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.tagName)&&Array.isArray(null===t||void 0===t?void 0:t.conversations)&&Array.isArray(null===t||void 0===t?void 0:t.friends)&&Array.isArray(null===t||void 0===t?void 0:t.friendRequests)&&Array.isArray(a))};var He=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(O.a)(c,2),m=i[0],u=i[1],d=Object(n.useState)(!1),g=Object(O.a)(d,2),p=g[0],E=g[1],x=Object(n.useState)([]),j=Object(O.a)(x,2),B=j[0],D=j[1],L=Object(l.b)(),z=Object(l.c)(y),q=Object(n.useState)(!1),F=Object(O.a)(q,2),J=F[0],Z=F[1],Y=Object(n.useRef)(null);Object(n.useEffect)((function(){Y.current&&Y.current.focus()}),[]);var $=function(){var e=!0;return!1===P.tagName.test(a)&&(D(["Tag name must be 8-24 characters"].concat(Object(w.a)(B))),e=!1),!1===P.password.test(m)&&(D(["Password must be 8-32 characters"].concat(Object(w.a)(B))),e=!1),e||E(!0),e};Object(n.useEffect)((function(){L(Ae(""))}),[]);var U=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n,r,o,c,s,l,i,u,d;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!1),D([]),Z(!0),$()){e.next=7;break}return console.log("Invalid form field inputs",B),Z(!1),e.abrupt("return");case 7:return e.next=9,We(a,m);case 9:if(!1!==(t=e.sent)){e.next=15;break}return E(!0),Z(!1),D(["Invalid Credentials"].concat(Object(w.a)(B))),e.abrupt("return");case 15:if(n=t.id,r=t.user,o=t.invites,!1!==Te(n,r,o)){e.next=21;break}return E(!0),Z(!1),D(["Invalid Credentials"].concat(Object(w.a)(B))),e.abrupt("return");case 21:if(L(b(null===r||void 0===r?void 0:r.email)),L(h(null===r||void 0===r?void 0:r.tagName)),L(f(n)),r.conversations.map((function(e){!0!==e.pending&&L(ee({conversation:e}))})),r.friends.map((function(e){L(Ee(e))})),r.friendRequests&&Array.isArray(null===r||void 0===r?void 0:r.friendRequests)){c=Object(N.a)(null===r||void 0===r?void 0:r.friendRequests);try{for(c.s();!(s=c.n()).done;)(null===(l=s.value)||void 0===l?void 0:l.recipientId)===(null===r||void 0===r?void 0:r.id)&&L(ye(l))}catch(g){c.e(g)}finally{c.f()}}if(o&&Array.isArray(o)){i=Object(N.a)(o);try{for(i.s();!(u=i.n()).done;)!0===(null===(d=u.value)||void 0===d?void 0:d.accepted)?L(de(d)):L(ue(d))}catch(g){i.e(g)}finally{i.f()}}L(v()),console.log("Successfully logged in user "+(null===r||void 0===r?void 0:r.tagName)),Z(!1);case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(null===z||void 0===z?void 0:z.loggedIn)?r.a.createElement(s.a,{to:"/home"}):r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0},r.a.createElement(A.a,{className:"p-3 mt-5 text-white lead text-center"},r.a.createElement(I.a,{className:"p-3 text-center, mx-auto pt-5 mt-5 shadow",style:{borderRadius:"15px",backgroundColor:"#191919",opacity:.6,maxWidth:"500px"}},r.a.createElement("h2",{className:"text-white",style:{opacity:.8,marginBottom:"35px"}},"Welcome to ",r.a.createElement("span",{className:"text-danger"},"Project Zed")),r.a.createElement("h6",{className:"text-muted font-italic",style:{marginBottom:"35px"}},"Secured by you, for you"),r.a.createElement(R.a,{className:"mb-5 mt-3"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"@Tagname","aria-label":"@Tagname","aria-describedby":"basic-addon1",onKeyPress:function(){var e=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,U();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:function(e){return o(e.target.value)},ref:Y})),r.a.createElement(R.a,{className:"mb-5"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},type:"password",placeholder:"Password","aria-label":"Password","aria-describedby":"basic-addon1",onKeyPress:function(){var e=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,U();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:function(e){return u(e.target.value)}})),r.a.createElement(S.a,{fluid:!0,className:"border-top border-dark pt-2"},r.a.createElement(A.a,{className:"mt-3"},r.a.createElement(I.a,null,r.a.createElement(W.a,{style:{marginRight:30,backgroundColor:"#191919",color:"white",opacity:.87,border:"none"},variant:"dark",className:"mx-auto button-outline-black",onClick:function(){return document.getElementById("link-create-account").click()}},r.a.createElement(H.b,{id:"link-create-account",style:{textDecoration:"none",color:"white"},to:"/createAccount"},"Create\xa0Account")))),r.a.createElement(A.a,{className:"mt-3"},r.a.createElement(I.a,null,r.a.createElement(W.a,{style:{color:"white",backgroundColor:"#191919",opacity:.87,border:"none"},variant:"dark",className:"mx-auto button-outline-black ",onClick:function(){return document.getElementById("link-forgot-password").click()}},r.a.createElement(H.b,{id:"link-forgot-password",style:{textDecoration:"none",color:"white"},to:"/forgotPassword"},"Forgot\xa0Password?")))),r.a.createElement(A.a,{className:"mt-3 mb-2"},r.a.createElement(I.a,null,J?r.a.createElement(T.a,{animation:"border",className:"mb-4",style:{height:60,width:60},variant:"success"}):r.a.createElement(W.a,{onClick:U,size:"lg",className:"rounded-pill mb-4 mx-auto",variant:"outline-success",style:{opacity:.8,maxWidth:"200px",marginTop:"20px"},block:!0},"Login"))),r.a.createElement(A.a,{className:"mt-3 mb-3"},p?r.a.createElement(I.a,{className:"text-center"},r.a.createElement("ul",null,B.map((function(e){return r.a.createElement("li",{key:e,className:"text-danger text-center lead font-italic"},e)})))):"",J?r.a.createElement(I.a,{className:"text-center"},r.a.createElement("span",{className:"text-success lead font-italic font-weight-bolder",style:{opacity:1,fontSize:"15pt"}},"Logging in...")):"")))))};a(174);function Pe(){return r.a.createElement("div",{key:"login-screen-div",className:"w-100 h-100"},r.a.createElement(He,null))}a(110);function Be(){var e=Object(n.useState)({width:void 0,height:void 0}),t=Object(O.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}function De(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(O.a)(c,2),i=s[0],m=s[1],u=Object(n.useState)(!1),d=Object(O.a)(u,2),g=d[0],p=d[1],f=Object(n.useState)([]),b=Object(O.a)(f,2),h=b[0],v=b[1],E=Object(n.useState)(!1),y=Object(O.a)(E,2),x=y[0],N=y[1],w=Object(n.useState)(!1),j=Object(O.a)(w,2),k=j[0],C=j[1],T=(Be(),Object(l.b)());return Object(n.useEffect)((function(){T(Ae(""))}),[]),r.a.createElement(S.a,{className:"h-100 w-100 pb-5",fluid:!0},r.a.createElement(A.a,{className:"p-3 mt-5 text-white lead text-center"},r.a.createElement(I.a,{className:"p-3 text-center, mx-auto pt-5 mt-5 shadow",style:{borderRadius:"15px",backgroundColor:"#191919",opacity:.6,maxWidth:"500px"}},r.a.createElement("h4",{className:"text-white",style:{opacity:.8,marginBottom:"35px"}},"Forgotten Password"),r.a.createElement(R.a,{className:"mb-5 mt-3"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Enter Your Tagname","aria-label":"Enter Your Tagname","aria-describedby":"basic-addon1",className:k?"form-control-error":"form-control-normal",onChange:function(e){m(e.target.value)}})),r.a.createElement(R.a,{className:"mb-5 mt-3"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Enter Your Email","aria-label":"Enter Your Email","aria-describedby":"basic-addon1",className:x?"form-control-error":"form-control-normal",onChange:function(e){return o(e.target.value)}})),r.a.createElement(W.a,{onClick:function(){N(!1),C(!1),v([]),p(!1),function(){var e=!0,t=[];return!1===P.email.test(a)&&(t.push("Invalid Email Address!"),N(!0),e=!1),!1===P.tagName.test(i)&&(t.push("Tag name must be 8-24 characters"),C(!0),e=!1),e||(v(t),p(!0)),e}()?console.log("Sending forgot password request for user @".concat(i," with email ").concat(a)):console.log("Error with data submission: ",h)},size:"lg",className:"rounded-pill mb-4 mx-auto",variant:"outline-success",style:{opacity:.8,maxWidth:"200px"},block:!0},"Reset Password"),r.a.createElement(S.a,{fluid:!0,style:{opacity:1.2}},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-left"},r.a.createElement("ul",{style:{listStyleType:"none",marginRight:"auto",marginLeft:"auto",paddingRight:"30px"}},g?r.a.createElement("li",null,r.a.createElement("h6",{className:"border-bottom pb-2 border-danger text-danger font-weight-bold"},"Errors")):"",g?h.map((function(e){return r.a.createElement("li",{key:e,className:"font-italic lead text-danger"},e)})):"")))))))}function Le(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(De,null))}var ze=function(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(O.a)(c,2),m=i[0],u=i[1],d=Object(n.useState)(""),g=Object(O.a)(d,2),p=g[0],f=g[1],b=Object(n.useState)(""),h=Object(O.a)(b,2),v=h[0],E=h[1],y=Object(n.useState)(!1),x=Object(O.a)(y,2),N=x[0],w=x[1],j=Object(n.useState)(!1),T=Object(O.a)(j,2),H=T[0],B=T[1],D=Object(n.useState)([]),L=Object(O.a)(D,2),z=L[0],q=L[1],F=Object(n.useState)(!1),J=Object(O.a)(F,2),Z=J[0],Y=J[1],$=Object(n.useState)(!1),U=Object(O.a)($,2),V=U[0],_=U[1],K=Object(n.useState)(!1),G=Object(O.a)(K,2),X=G[0],Q=G[1],ee=Object(n.useState)(!1),te=Object(O.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),oe=Object(O.a)(re,2),ce=oe[0],se=oe[1],le=(Be(),Object(l.b)()),ie=function(){var e=!0,t=[];return p!==v&&(t.push("Passwords don't match"),Y(!0),e=!1),!1===P.tagName.test(a)&&(t.push("Invalid Tagname"),_(!0),e=!1),!1===P.email.test(m)&&(t.push("Invalid Email"),Q(!0),e=!1),!1===P.password.test(p)&&(t.push("Invalid Password. Must be 10-32 characters and digits."),ne(!0),e=!1),!1===P.password.test(v)&&(t.push("Invalid Second Password. Must be 10-32 characters and digits."),q(t),ne(!0),e=!1),e||(B(!0),q(t)),e},me=function(){var e=Object(C.a)(k.a.mark((function e(){var t,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(!1),Y(!1),_(!1),Q(!1),ne(!1),se(!1),ie()){e.next=5;break}return console.log("Error with data submission: ",z),e.abrupt("return");case 5:return t={email:m,password:p,session:0,tagName:a},e.next=8,fetch("http://localhost:3000/api/users/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 8:return n=e.sent,e.next=11,n.json();case 11:r=e.sent,console.log(r),w(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){le(Ae(""))}),[]),N?r.a.createElement(s.a,{to:"/login"}):r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0},r.a.createElement(A.a,{className:"p-3 mt-5 text-white lead text-center"},r.a.createElement(I.a,{className:"p-3 text-center, mx-auto pt-5 mt-5 shadow",style:{borderRadius:"15px",backgroundColor:"#191919",opacity:.6,maxWidth:"500px"}},r.a.createElement("h4",{className:"text-white",style:{opacity:.8,marginBottom:"55px"}},"Enter your account information"),r.a.createElement(R.a,{className:"mb-5 mt-3"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Email Address","aria-label":"Email Address","aria-describedby":"basic-addon1",onChange:function(e){return u(e.target.value)},className:X?"form-control-error":"form-control-normal"})),r.a.createElement(R.a,{className:"mb-5 mt-3"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Desired Tag Name","aria-label":"Desired Tag Name","aria-describedby":"basic-addon1",onChange:function(e){return o(e.target.value)},className:V?"form-control-error":"form-control-normal"})),r.a.createElement(R.a,{className:"mb-5 mt-3"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},type:"password",placeholder:"Desired Password","aria-label":"Desired Password","aria-describedby":"basic-addon1",onChange:function(e){return f(e.target.value)},className:ae||Z?"form-control-error":"form-control-normal"})),r.a.createElement(R.a,{className:"mb-5 mt-3"},r.a.createElement(M.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},type:"password",placeholder:"Confirm Password","aria-label":"Confirm Password","aria-describedby":"basic-addon1",onChange:function(e){return E(e.target.value)},className:ce||Z?"form-control-error":"form-control-normal"})),r.a.createElement(W.a,{onClick:me,size:"lg",className:"rounded-pill mb-4 mx-auto",variant:"outline-success",style:{opacity:.8,maxWidth:"200px"},block:!0},"Sign Up"),r.a.createElement(S.a,{fluid:!0,style:{opacity:1.2}},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-left"},r.a.createElement("ul",{style:{listStyleType:"none",marginRight:"auto",marginLeft:"auto",paddingRight:"30px"}},H?r.a.createElement("li",null,r.a.createElement("h6",{className:"border-bottom pb-2 border-danger text-danger font-weight-bold"},"Errors")):"",H?z.map((function(e){return r.a.createElement("li",{key:e,className:"font-italic lead text-danger"},e)})):"")))))))};function qe(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(ze,null))}var Fe=a(79),Je=a.n(Fe),Ze=Object(u.b)({name:"globals",initialState:{devHost:"http://localhost:3002",prodHost:"https://zed-chat",testHost:"http://localhost:3002",metadata:"",api:"http://localhost:3000"},reducers:{setMetadata:function(e,t){e.metadata=t.payload}}}),Ye=(Ze.actions.setMetadata,function(e){return e.globals.prodHost}),$e=Ze.reducer,Ue=Object(u.a)({reducer:{auth:q,conversations:se,account:x,invite:fe,friends:we,globals:$e,ui:Me}}),Ve=a(34),_e=null,Ke={received:{connectSuccess:"connectSuccess",connectError:"connectError",delivered:"delivered",deliveryError:"deliveryError",readReceipt:"readReceipt",typing:"typing",listening:"listening",unlistened:"unlistened",unlistenError:"unlistenError",currentConversationUpdate:"currentConversationUpdate",setCurrentConversationError:"setCurrentConversationError",refreshSuccess:"refreshSuccess",refreshError:"refreshError",messagePinned:"messagePinned",messagePinnedError:"messagePinnedError"},sent:{connect:"connect",disconnect:"disconnect",chatToServer:"chatToServer",readMessage:"readMessage",typing:"typing",listen:"listen",unlisten:"unlisten",setCurrentConversation:"setCurrentConversation",pinMessage:"pinMessage"}};function Ge(){var e=Object(l.c)(y),t=Object(l.c)(re),a=Object(l.c)(z),o=Object(l.c)(ne),c=Object(l.b)(),s=Object(l.c)(Ye),i=Object(l.c)(xe);return Object(n.useEffect)((function(){if(t&&t.id&&a&&e&&"0"!==t.id){var n={transportOptions:{polling:{extraHeaders:{Authorization:"Bearer ".concat(a)}}},forceNew:!0};console.log("Setting up chat socket"),_e=Je.a.connect("".concat(s,"/chat"),n),console.log("Setting up chat socket event listeners and listening to rooms"),console.log("Setting up listeners"),_e.on(Ke.received.listening,(function(e){console.log("Successfully listening on room with ID ".concat(e.room))})),_e.on(Ke.received.connectSuccess,(function(e){console.log("Connected to socket.io server successfully with client id ".concat(e.socketId))})),_e.on(Ke.received.connectError,(function(e){console.log("Error: Cannot connect to socket.io server | ".concat(e.message))})),_e.on(Ke.received.delivered,(function(a){console.log("Handle message | ".concat(a.message.id," | delivered")),e.id!==a.message.user.id&&a.message.conversation.id!==t.id&&Ve.a.info("Message received from: ".concat(a.message.user.tagName),{position:"top-center",hideProgressBar:!0,pauseOnHover:!0}),a.message.id&&a.message.body&&a.message.createdAt&&(console.log("Adding message to state ... | ".concat(a.message.id)),c(X({message:a.message,conversation:a.message.conversation})))})),_e.on(Ke.received.deliveryError,(function(){console.log("Error: server error while marking message as delivered")})),_e.on(Ke.received.readReceipt,(function(e){console.log("Handle message | ".concat(e.message.id," | read receipt")),e.message.id&&e.message.body&&e.message.createdAt&&(console.log("Adding message read receipt to state ... | ".concat(e.message.id)),c(G({messageId:e.message.id,convId:e.message.conversation.id})))})),_e.on(Ke.received.typing,(function(a){if(console.log("Handle typing event conversation | ".concat(a.conv)),a.conv&&a.user){if(a.user.id===e.id)return;t.id===a.conv&&c(K(a.typing||!1))}})),_e.on(Ke.received.unlistened,(function(e){console.log("Handle unlisten event for conversation | ".concat(e.room))})),_e.on(Ke.received.unlistenError,(function(e){console.log("Error: unlisten event error for conversation | ".concat(e.msg))})),_e.on(Ke.received.currentConversationUpdate,(function(e){if(console.log("Handle current conversation update event for user | ".concat(e.user.tagName)),e.user){var t=i.filter((function(t){return t.id===e.user.id}))[0];t&&(console.log("Handle set current conversation for friend @".concat(e.user.tagName)),t=e.user)}})),_e.on(Ke.received.setCurrentConversationError,(function(e){console.log("Error: set current conversation event error | ".concat(e.msg))})),_e.on(Ke.received.refreshSuccess,(function(e){console.log("Handle success refresh socket client ID with server ".concat(e.clientId))})),_e.on(Ke.received.refreshError,(function(e){console.log("Handle error for refresh socket client ID with server error ".concat(e.msg))})),_e.on(Ke.received.messagePinned,(function(e){console.log("Handle message pinned from server",e),c(ae(e.message))})),_e.on(Ke.received.messagePinnedError,(function(e){console.log("Handle message pinned error from server",e)})),function(a){if(console.log("Listening to all rooms",o),o&&Array.isArray(o)){var n,r=Object(N.a)(o);try{for(r.s();!(n=r.n()).done;){var c=n.value;c&&c.id&&!1===c.pending&&(console.log("listening to conversation",c),a.emit(Ke.sent.listen,{room:c.id,user:e.id}))}}catch(s){r.e(s)}finally{r.f()}}else a.emit(Ke.sent.listen,{room:t.id,user:e.id})}(_e),_e.emit("refresh",{userId:e.id,refresh:!0})}else _e=null;return function(){_e&&(Object.keys(Ke.received).map((function(e){return _e.off(e)})),_e.close(),_e=null)}}),[t.id]),r.a.createElement(r.a.Fragment,null)}var Xe,Qe=a(250);function et(){var e=Object(n.useState)(""),t=Object(O.a)(e,2),a=t[0],o=t[1],c=Object(l.c)(y),s=Object(l.c)(re),i=Object(n.useRef)(null),m=Object(n.useState)(null),u=Object(O.a)(m,2),d=u[0],g=u[1],p=Be(),f=Object(n.useState)(!1),b=Object(O.a)(f,2),h=b[0],v=b[1],E=Object(n.useState)(!1),x=Object(O.a)(E,2),N=(x[0],x[1]),j=Object(n.useState)([]),S=Object(O.a)(j,2),H=S[0],B=S[1],D=Object(n.useState)(""),L=Object(O.a)(D,2),z=(L[0],L[1],Object(n.useState)(!1)),q=Object(O.a)(z,2),F=q[0],J=q[1],Z=function(){var e=!0;return!1===P.messageBody.test(a)&&(B(["Invalid message body. Must be 1-200 characters."].concat(Object(w.a)(H))),e=!1),e||v(!0),e},Y=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z()){e.next=3;break}return console.log("Error with sending message",H),e.abrupt("return");case 3:console.log("Send message ",a),N(!0),_e?(_e.emit("chatToServer",{sender:c.tagName,room:s.id,body:"".concat(a)}),J(!0),i.current.value="",N(!1)):(v(!0),B(["Corrupted chat socket. Please refresh."]),console.log("Corrupted chat socket. Please refresh."),N(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){_e&&c&&s?_e.emit("typing",{sender:c.tagName,room:s.id,typing:e}):console.log("Error: no conversation to send typing to! Please refresh")};return Object(n.useEffect)((function(){_e&&i&&s&&c&&(i.current.onkeypress=function(){void 0!==Xe&&clearTimeout(Xe),Xe=setTimeout((function(){console.log("typing done"),g(!1),$(!1)}),1e3)})}),[s.id]),Object(n.useEffect)((function(){s.messages&&Array.isArray(s.messages)&&J(!1)}),[s.messages]),r.a.createElement("div",null,r.a.createElement(A.a,{className:"w-100 text-center",style:{position:"fixed",bottom:40,left:50}},p.width>768?r.a.createElement(I.a,{style:{minWidth:"240px",maxWidth:"240px"}}):"",r.a.createElement(I.a,{className:"mx-auto",style:{paddingRight:"15px",paddingLeft:p.width>768?"2%":"5%"}},h?r.a.createElement("div",{className:"text-danger lead",style:{opacity:.7}},H):"",r.a.createElement(R.a,{className:"pb-3 mx-auto"},r.a.createElement(M.a,{style:{backgroundColor:"#404040",color:"white",border:"none"},placeholder:"Enter a Message","aria-label":"Enter a Message","aria-describedby":"basic-addon2",className:"rounded-pill p-4",ref:i,onKeyPress:function(){var e=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,Y();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:function(){var e=Object(C.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_e&&!d&&(g(!0),$(!0),console.log("Typing started")),o(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(R.a.Append,null,F?r.a.createElement(T.a,{className:"m-2 p-2",size:"lg",variant:"info",animation:"border"}):r.a.createElement(W.a,{onClick:Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:case"end":return e.stop()}}),e)}))),className:"ml-1 rounded-pill text-right",variant:"outline-secondary",style:{border:"none",backgroundColor:"#404040",color:"#02a5ff"},id:"basic-addon2"},r.a.createElement(Qe.a,{style:{color:"white",opacity:"0.87"}}))))),r.a.createElement(I.a,{xs:"1"})))}var tt=a(265),at=(a(200),a(54)),nt=a.n(at),rt=(a(123),a(55)),ot=a.n(rt),ct=a(134),st=a.n(ct),lt=a(253),it=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function mt(e){var t=e.sentByMe,a=e.deleteMessage,n=e.pinMessage;return r.a.createElement(tt.a,{className:t?"msg-dropdown message-dropdown-sender light-hover":"msg-dropdown message-dropdown-received light-hover",drop:t?"left":"right"},r.a.createElement(tt.a.Toggle,{as:W.a,variant:"dark",className:"message-menu-button"},r.a.createElement(nt.a,null)),r.a.createElement(tt.a.Menu,{style:{backgroundColor:"#222222",minWidth:"80px"},className:"my-dropdown-message shadow text-white text-center"},r.a.createElement(tt.a.Item,{className:"text-white shadow dropdown-item-message",as:"button",onClick:function(e){e.preventDefault(),e.stopPropagation(),n&&n()}},"Pin\xa0",r.a.createElement(st.a,null)),t?r.a.createElement(tt.a.Item,{className:"text-white shadow dropdown-item-message",as:"button",onClick:function(e){e.preventDefault(),e.stopPropagation(),a&&a()}},"Delete\xa0",r.a.createElement(ot.a,null)):""))}var ut=function(e){var t=new Date(Date.parse(e));return{hour:t.getHours(),min:t.getMinutes(),pm:t.getHours()>12,day:t.getTime()<Date.now()-864e5?it[t.getDay()]:"",minsAgo:(Date.now()-t)/1e3/60}};function dt(e){var t=e.message,a=e.isBottom,o=Object(n.useState)(ut(t.createdAt)),c=Object(O.a)(o,2),s=c[0],l=(c[1],Object(n.useState)(!1)),i=Object(O.a)(l,2),m=i[0],u=i[1],d=Be();return r.a.createElement(S.a,{key:Math.random(),className:"mt-2 mb-2",style:{marginTop:"auto",minHeight:"80px"},fluid:!0},r.a.createElement(A.a,{onMouseLeave:function(){return u(!1)}},r.a.createElement(I.a,{xs:"12",className:"text-right pr-2"},r.a.createElement(S.a,{fluid:!0,className:d.width>768?"pr-5":""},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"text-right message-me-column",onMouseEnter:function(){u(!0)}},r.a.createElement(lt.a,{className:"p-2 m-1 text-white text-left message-from-me message-column",style:{borderRadius:"18px 18px 5px 18px",display:"block",backgroundColor:"#3266a8",wordWrap:"break-word"}},t.body)),r.a.createElement(I.a,{xs:"1",style:{maxWidth:"20px"},className:"text-right"},m?r.a.createElement(mt,{sentByMe:!0,pinMessage:function(){alert("message pinned")},deleteMessage:function(){alert("message del")}}):""))))),m||a?r.a.createElement(A.a,{style:{opacity:.8}},r.a.createElement(I.a,{xs:"12",className:"text-right pr-3"},r.a.createElement(S.a,{fluid:!0,className:d.width>768?"pr-5":""},r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:d.width>768?"8":"6",className:"text-center"}),r.a.createElement(I.a,{className:"text-right"},r.a.createElement("span",{style:{opacity:.7,fontSize:"10pt"},className:"font-italic text-left text-white text-small"},"".concat(!0===t.read?"Read - ":" Delivered - "),s.minsAgo<60?"".concat(s.minsAgo.toFixed()>0?s.minsAgo.toFixed()+" mins ago":"Now"):"".concat(s.day?s.day+", ":"Today, ").concat(s.hour,":").concat(s.min<10?"0"+s.min:s.min).concat(s.pm?"PM":"AM"))))))):"")}function gt(e){var t=e.message,a=Object(n.useState)(ut(t.createdAt)),o=Object(O.a)(a,2),c=o[0],s=(o[1],Object(n.useState)(!1)),i=Object(O.a)(s,2),m=i[0],u=i[1];Be(),Object(l.b)();return r.a.createElement(S.a,{key:Math.random(),className:"mt-2 mb-2 p-1",style:{marginTop:"auto",minHeight:"80px"},fluid:!0},r.a.createElement(A.a,{onMouseLeave:function(){return u(!1)}},r.a.createElement(I.a,{xs:"12",className:"text-left"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:"1",style:{maxWidth:"20px"},className:"text-left"},m?r.a.createElement(mt,{pinMessage:function(){alert("message pinned")},sentByMe:!1}):""),r.a.createElement(I.a,{className:"text-left message-me-column",onMouseEnter:function(){u(!0)}},r.a.createElement(lt.a,{className:"p-2 m-1 text-white text-left message-from-other message-column",style:{borderRadius:"5px 18px 18px 18px",display:"block",backgroundColor:"#1E3D64",wordWrap:"break-word"}},t.body)))))),r.a.createElement(A.a,{style:{opacity:.8,maxHeight:"10px"}},r.a.createElement(I.a,{xs:"9",className:"text-left pl-4 pt-2",style:{opacity:.7}},r.a.createElement("span",{className:"font-italic text-left text-white"},r.a.createElement("span",{style:{opacity:.7,fontSize:"10pt"},className:"text-white text-small"},"@".concat(t.user.tagName," ")),c.minsAgo<60?"- ".concat(c.minsAgo.toFixed()>0?c.minsAgo.toFixed()+" mins ago":"Now"):"- ".concat(c.day?c.day+", ":"Today, ").concat(c.hour,":").concat(c.min<10?"0"+c.min:c.min," ").concat(c.pm?"PM":"AM"))),r.a.createElement(I.a,{xs:"3",className:"text-center"})))}function pt(e){var t=e.message,a=e.isBottom,n=Object(l.c)(y);return t.user.id===n.id?r.a.createElement(dt,{message:t,isBottom:a}):r.a.createElement(gt,{message:t})}function ft(e){var t=e.defaultView,a=Object(n.useState)(!1),o=Object(O.a)(a,2),c=o[0],s=o[1],i=Object(n.useState)([]),m=Object(O.a)(i,2),u=m[0],d=m[1],g=Object(n.useState)(!1),p=Object(O.a)(g,2),f=p[0],b=p[1],h=Object(l.c)(re),v=(Object(l.c)(y),Object(l.c)(Ye),Object(l.c)(z)),E=Be(),x=Object(n.useRef)(),N=Object(l.b)();h||(h={});var w=E.height-E.height/8;isNaN(w)&&(w=window.innerHeight-window.innerHeight/8);var j=function(){var e=Object(C.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Requesting more messages for conversation "+h.id),e.next=3,fetch("http://localhost:3000/api/conversation/messages/range/?"+new URLSearchParams({id:h.id,beforeDate:h.messages[0].createdAt,number:25}),{headers:{Authorization:"Bearer ".concat(v)}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,Array.isArray(a)&&(console.log(a),N(Y({messages:a,conversationId:h.id})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(C.a)(k.a.mark((function e(){var t,a,n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.current){e.next=8;break}if(!((null===(t=x.current)||void 0===t?void 0:t.scrollTop)<=100&&!0!==f)){e.next=8;break}if(!((null===(a=h)||void 0===a||null===(n=a.messages)||void 0===n?void 0:n.length)<(null===(r=h)||void 0===r?void 0:r.numberOfMessages))){e.next=8;break}if(!1!==f){e.next=8;break}return b(!0),e.next=7,j();case 7:b(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){h&&h.messages&&(N($()),d(h.messages)),x&&x.current&&!1===f&&(x.current.scrollTop=x.current.scrollHeight)}),[h.messages]),Object(n.useEffect)((function(){x&&x.current&&!1===f&&(x.current.scrollTop=x.current.scrollHeight)}),[u]),Object(n.useEffect)((function(){h&&void 0!==h.typing&&(console.log("setting is typing"),s(h.typing))}),[h.typing]),t?r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:"3"}),r.a.createElement(I.a,{className:"mt-5 lead",style:{opacity:.87,color:"#404040"}},r.a.createElement("span",{style:{marginTop:"auto"}},"Click a conversation")),r.a.createElement(I.a,{xs:"3"})):r.a.createElement(A.a,{className:"w-100",style:{marginTop:75}},E.width>768?r.a.createElement(I.a,{style:{minWidth:"240px",maxWidth:"240px"}}):"",r.a.createElement(I.a,{style:{paddingLeft:E.width>768?"0%":"3%"}},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{style:{height:w}},r.a.createElement(I.a,{ref:x,onScroll:R,className:"ul",style:{bottom:150,paddingBottom:50,paddingTop:100,height:w-10,overflowY:"scroll",position:"fixed",paddingLeft:"20px",paddingRight:"85px",width:E.width>768?E.width-240:E.width,maxWidth:E.width>768?E.width-240:E.width}},u.map((function(e,t){return r.a.createElement(A.a,{key:e.id+"row",className:"messages-list-item"},r.a.createElement(pt,{key:e.id,message:e,isBottom:t>=u.length-1}))})))),c||f?r.a.createElement(A.a,null,r.a.createElement(S.a,{key:Math.random(),style:{position:"fixed",bottom:120},className:"typing-list-item-container",fluid:!0},r.a.createElement(A.a,{className:"mt-1 mb-1"},r.a.createElement(I.a,{xs:"1"}),r.a.createElement(I.a,{xs:"9",className:"text-left"},r.a.createElement("div",{className:"p-2 m-1 text-white typing-list-item",style:{borderRadius:"18px",display:"inline-block",whiteSpace:"nowrap",backgroundColor:"#1E3D64"}},f?r.a.createElement("span",null,r.a.createElement("span",{className:"font-italic text-muted",style:{fontSize:"18pt"}},"Loading Messages"),"\xa0\xa0",r.a.createElement(T.a,{animation:"grow",size:"lg"})):"",c?r.a.createElement("span",null,r.a.createElement(T.a,{animation:"grow",size:"lg"}),r.a.createElement(T.a,{animation:"grow",size:"lg"}),r.a.createElement(T.a,{animation:"grow",size:"lg"})):"")),r.a.createElement(I.a,{xs:"3",className:"text-center"})),r.a.createElement(A.a,{className:"",style:{marginTop:-10}},r.a.createElement(I.a,{xs:"9",className:"text-left pl-4"},r.a.createElement("span",{className:"font-italic text-left text-muted"})),r.a.createElement(I.a,{xs:"3",className:"text-center"})))):"")))}function bt(){var e=Be(),t=Object(l.c)(oe);return t?r.a.createElement(S.a,{fluid:!0}):r.a.createElement(S.a,{className:"pl-3",style:{minHeight:e.height,height:e.height},fluid:!0},r.a.createElement(A.a,{style:{minHeight:e.height-150,height:e.height-150,paddingBottom:"auto"}},r.a.createElement(ft,{defaultView:t,style:{minHeight:e.height,height:e.height}})),r.a.createElement(A.a,{style:{minHeight:20}}),r.a.createElement(A.a,{className:"pb-2"},r.a.createElement(et,null)),r.a.createElement(A.a,{style:{minHeight:20}}))}var ht=a(269),vt=a(256),Et=a(254),yt=a(257),xt=a(271),Nt=a(258),wt=a(268),Ot=Object(Et.a)((function(e){return{animate_in:{width:0,visibility:"invisible",flexShrink:0,animationName:"fadeout",animationDuration:"1s"},animate_out:{width:"200px",flexShrink:0,animationName:"fadeout",animationDuration:"1s"},"@keyframes fadeout":{"0%":{width:"25%"},"100%":{width:0,display:"none",opacity:1}},"@keyframes fadein":{"0%":{width:0,opacity:0},"100%":{width:"25%",opacity:1}},narrowPaper:{minWidth:"240px",maxWidth:"240px",backgroundColor:"#222222",opacity:.8},hidePaper:{backgroundColor:"#222222",width:"0%"},fullDrawerPaper:{width:"100%",backgroundColor:"#222222"},drawerContainer:{backgroundColor:"#222222",color:"white",paddingRight:"20px",overflowX:"hide"}}}));function jt(e){var t=e.conversation,a=e.selectConversation,n=e.deleteConversation,o=e.selected,c=e.minWidth,s=e.buttonMargin;return r.a.createElement(xt.a,{onClick:function(){return a(t)},key:t.id,className:o?"sidebar-list-item light-selected":"sidebar-list-item light-hover",style:{backgroundColor:"#222222"}},r.a.createElement(S.a,{fluid:!0,style:{backgroundColor:"#222222"},className:o?"light-selected":"light-hover"},r.a.createElement(A.a,{style:{backgroundColor:"#222222"},className:o?"light-selected":"light-hover"},r.a.createElement(I.a,{className:o?"conv-info light-selected":"conv-info light-hover",style:{minWidth:c}},r.a.createElement(S.a,{fluid:!0,className:o?"light-selected":"light-hover"},r.a.createElement(A.a,{className:"font-italic text-primary",style:{fontSize:"11pt",minWidth:c}},t.conversationName),r.a.createElement(A.a,{className:"w-100",style:{fontSize:"9pt"}},r.a.createElement("div",{className:"ml-1 d-block text-truncate"},t.messages[0].body)),r.a.createElement(A.a,{className:"lead w-100 mt-1",style:{fontSize:"8pt"}},r.a.createElement("div",{className:"ml-1 d-block font-italic"},new Date(Date.parse(t.createdAt)).toLocaleString("en-US"))))),r.a.createElement(I.a,{className:o?"hide-conv-info text-right light-selected":"hide-conv-info text-right light-hover",style:{backgroundColor:"#222222",marginLeft:s}},r.a.createElement(S.a,{className:o?"light-selected":"light-hover",style:{backgroundColor:"#222222"},fluid:!0},r.a.createElement(tt.a,{className:o?"light-selected":"light-hover",style:{backgroundColor:"#222222",marginLeft:"-20px"}},r.a.createElement(tt.a.Toggle,{className:"dropdown-toggle-conv-info text-white",style:{border:" none",backgroundColor:"#222222"},as:W.a,variant:"dark",id:"dropdown-custom-components"},r.a.createElement(nt.a,null)),r.a.createElement(tt.a.Menu,{style:{backgroundColor:"#222222"},className:"my-dropdown shadow text-white text-center"},r.a.createElement(tt.a.Item,{className:"text-white shadow conv-dropdown p-2",as:"button",onClick:function(e){e.preventDefault(),e.stopPropagation(),n&&n(t.id)}},"Delete\xa0",r.a.createElement(ot.a,null)))))))))}function kt(){var e=Be(),t=Ot(),a=e.width<768,o=Object(l.c)(ne),c=Object(n.useState)([]),i=Object(O.a)(c,2),m=i[0],u=i[1],d=Object(l.b)(),g=Object(l.c)(ce),p=Object(l.c)(y),f=Object(n.useState)(""),b=Object(O.a)(f,2),h=b[0],v=b[1],E=Object(s.g)(),x=Object(s.h)(),N=Object(l.c)(re),w=(Object(l.c)(Ie),Object(n.useState)(!1)),j=Object(O.a)(w,2),k=j[0],C=j[1],A=Object(n.useState)(!1),I=Object(O.a)(A,2),T=I[0],H=I[1],B=Object(n.useState)(!1),D=Object(O.a)(B,2),L=D[0],z=D[1],q=function(t){if(!t.pending)return console.log("Setting current conversation...",t),console.log(E,x),z(!1),"/home"!==x.pathname&&E.push("/home"),N.conversationName===t.conversationName?(d(_(!1)),void d(U(!1))):(t&&""!==t.conversationName&&e.width>768&&N.conversationName!==t.conversationName&&d(Ae(t.conversationName)),t&&""!==t.conversationName&&e.width<=768&&N.conversationName!==t.conversationName&&d(Ae("")),d(_(!1)),d(Q({conversation:t})),_e&&_e.emit("setCurrentConversation",{user:p,conversationId:t.id},(function(){return console.log("Emitted setCurrentConversation successfully")})),void d(U(!1)));console.log("Conversation is pending invite accept",t)},F=function(e){console.log("Deleting Conversation "+e),N&&N.id===e&&(d(U(!0)),d(Ae("")),z(!0)),d(te({id:e}))};Array.isArray(o)&&o.length>1&&(o=o.filter((function(e,t,a){return a.indexOf(e)===t})));var J=function(e,t,a){return(e||t)&&a?"450px":e&&!a?"0px":"200px"}(a,L,g),Z=function(e,t){return e&&t?"150px":e&&!t?"0px":"-5px"}(a,g);return r.a.createElement(ht.a,{variant:"permanent",classes:{paper:(a||L)&&g?t.fullDrawerPaper:a&&!g?t.hidePaper:t.narrowPaper}},r.a.createElement(vt.a,null),r.a.createElement("div",{className:t.drawerContainer},r.a.createElement(yt.a,{style:{opacity:.8}},r.a.createElement(xt.a,{style:{maxWidth:"500px",maxHeight:"120px"},className:"text-small text-center mx-auto",selected:!1,key:"sidebar-search"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(R.a,{className:"mx-auto"},r.a.createElement(M.a,{style:{textAlign:"center"},placeholder:"Search","aria-label":"Search","aria-describedby":"basic-addon1",onChange:function(e){return v(e.target.value)},className:"mx-auto lead form-control-custom",autoComplete:"new-password"}),r.a.createElement(R.a.Append,{style:{maxWidth:"30px"}},r.a.createElement(wt.a,{title:"Search Chat Names"},r.a.createElement(W.a,{variant:"dark",onClick:function(){return function(){if(H(!1),h.length>4){if(!1===P.conversationName.test(h))return console.log("Input failed for searching a conversation name"),void H(!0);var e=o.filter((function(e){return e.conversationName.includes(h)||h.includes(e.conversationName)}));e.length>0?(u(e),C(!0)):H(!0)}else H(!0)}()},className:"custom-sidebar-search-button",style:{backgroundColor:"#404040",border:"none"}},r.a.createElement(Nt.a,{className:T?"error-icon":"",style:{color:"#EEEEEE"}}))),k?r.a.createElement(wt.a,{title:"Exit Search"},r.a.createElement(W.a,{variant:"dark",onClick:function(){return C(!1)},className:"custom-sidebar-search-button",style:{backgroundColor:"#404040",border:"none"}},"X")):"")))),k?m.map((function(e){return!0===e.pending?"":r.a.createElement(jt,{conversation:e,selectConversation:q,deleteConversation:F,buttonMargin:Z,selected:N.conversationName===e.conversationName,minWidth:J,key:e.id})})):o.map((function(e){return!0===e.pending?"":r.a.createElement(jt,{conversation:e,selectConversation:q,deleteConversation:F,buttonMargin:Z,selected:N.conversationName===e.conversationName,minWidth:J,key:e.id})})))))}function Ct(){return Object(l.c)(ce)?r.a.createElement(kt,null):r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(Ge,null),r.a.createElement(kt,null),r.a.createElement(S.a,{fluid:!0,className:"w-100 h-100"},r.a.createElement(bt,{className:"w-100 h-100"})))}a(202);var St=a(87),At=a.n(St),It=a(136),Rt=a.n(It),Mt=null;var Wt=a(267);a(203);function Tt(e){var t=e.handleSetConvPassword,a=Object(n.useState)(""),o=Object(O.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)(!1),i=Object(O.a)(l,2),m=i[0],u=i[1],d=Object(n.useRef)([]),g=Object(n.useRef)(null),p=(Be(),function(){u(!1),d.current=[],function(){var e=!0;return!1===P.password.test(c)&&(e=!1,d.current.push("Invalid Password. Must be 8-32 characters")),e||u(!0),e}()?t(c):console.log("Error with password",d)});return Object(n.useEffect)((function(){null!=g.current&&g.current.focus()}),[g]),r.a.createElement("div",{className:"modal-password-set"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"pt-2 pb-3"},r.a.createElement(I.a,{className:"mx-auto text-center pt-3"},r.a.createElement(At.a,{style:{width:42,height:42}}))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Set Password"))),r.a.createElement(A.a,{className:"pt-2 pb-2"},r.a.createElement(I.a,{style:{borderBottom:"1px solid #303030"},className:"mx-auto text-center",xs:"10"},r.a.createElement(R.a,{className:"mb-3 mt-2 mx-auto"},r.a.createElement(M.a,{style:{fontSize:"18pt",textAlign:"center",color:"white",minHeight:"50px",border:"none",minWidth:"80%",backgroundColor:"#252525"},placeholder:"Enter Password",type:"password","aria-label":"Enter Password","aria-describedby":"basic-addon1",onChange:function(e){s(e.target.value)},className:m?"mx-auto lead form-control-red":"mx-auto lead form-control-custom",ref:g,autoComplete:"new-password",name:"setPWNewConv"})))),r.a.createElement(A.a,{className:"pt-3 mt-2"},r.a.createElement(I.a,{className:"mx-auto text-center",xs:"10"},r.a.createElement(W.a,{onClick:function(){return p()},variant:"outline-success",size:"lg",style:{backgroundColor:"#252525",marginLeft:"auto",marginRight:"auto"},className:"p-3 rounded-pill"},"Set Password")))))}function Ht(e){var t=e.setConversationName,a=e.errorName,o=Object(n.useRef)(null);return Object(n.useEffect)((function(){o.current&&o.current.focus()}),[o.current]),r.a.createElement(S.a,{fluid:!0,style:{maxWidth:"500px"}},r.a.createElement(R.a,{className:"mt-2 mx-auto"},r.a.createElement(M.a,{style:{textAlign:"center",fontSize:"22pt",color:"#d9534f",minHeight:"50px",border:"none",backgroundColor:"#191919"},placeholder:"Enter Chat Name","aria-label":"Enter Chat Name","aria-describedby":"basic-addon1",onChange:function(e){return t(e.target.value)},className:a?"mx-auto lead form-control-red":"mx-auto lead form-control-custom",autoComplete:"new-password",name:"setNameNewConv",ref:o})))}function Pt(e){var t=e.errorSearch,a=e.selectedFriends,o=e.setSelectedFriends,c=e.setErrorSearch,s=e.setError,i=e.errorMsgs,m=e.setButtonsDisabled,u=Object(l.c)(xe),d=Object(n.useState)(""),g=Object(O.a)(d,2),p=g[0],f=g[1],b=Object(n.useState)([]),h=Object(O.a)(b,2),v=h[0],E=h[1];Object(n.useEffect)((function(){E(JSON.parse(JSON.stringify(u)))}),[u]),Object(n.useEffect)((function(){a.length<1?(m(!0),console.log("Buttons disabled")):(m(!1),console.log("Buttons enabled"))}),[a]);var y=function(e,t){var n=JSON.parse(JSON.stringify(a));return t?a.length>0?a.filter((function(t){return t===e})).length>1?void 0:(n.push(e),void o(n)):void o([e]):a.length>0?a.filter((function(t){return t===e})).length>0?void o(a.filter((function(t){return t!==e}))):void 0:void o([])};return r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"pb-3"},r.a.createElement(I.a,{xs:"2"}),r.a.createElement(I.a,{xs:"8",className:"border-bottom border-dark",style:{maxWidth:"450px"}},r.a.createElement(R.a,{className:"mb-3 mt-2 mx-auto"},r.a.createElement(M.a,{style:{textAlign:"center",fontSize:"18pt",color:"#EEEEEE",opacity:.8,minHeight:"50px",border:"none",backgroundColor:"#191919"},placeholder:"Search friends","aria-label":"Search friends","aria-describedby":"basic-addon1",onChange:function(e){return f(e.target.value)},className:t?"mx-auto lead form-control-red font-italic":"mx-auto lead form-control-custom font-italic",value:p,autoComplete:"new-password"}))),r.a.createElement(I.a,{xs:"2",style:{maxWidth:"50px"}},r.a.createElement(W.a,{onClick:function(){!function(){if(c(!1),s(!1),i.current=[],!1===P.tagName.test(p))return c(!0),s(!0),f(""),void i.current.push("Invalid tagname for search");E(v.filter((function(e){return e.tagName.includes(p)||p.includes(e.tagName)})))}()},variant:"dark",style:{marginTop:"10px",display:"block",backgroundColor:"#191919",border:"none"}},r.a.createElement("span",{className:"text-primary text-lg-center"},r.a.createElement(Nt.a,{style:{color:"#BBBBBB",height:35,width:35,cursor:"pointer"}}))))),r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"mx-auto"},r.a.createElement("span",{className:"font-italic text-small",style:{color:"dodgerblue"}},"Select Friends For Chat"))),r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:"2"}),r.a.createElement(I.a,{xs:"8",style:{maxWidth:"500px"}},r.a.createElement(S.a,{fluid:!0,style:{minHeight:"225px",overflowY:"scroll",backgroundColor:"#191919"}},v&&v.length>0?v.map((function(e){return r.a.createElement(Bt,{key:e.id,id:e.id,tagName:e.tagName,onCheck:y})})):r.a.createElement(A.a,{className:"mb-4"},r.a.createElement(I.a,{className:"mx-auto text-center text-muted font-italic pt-5"},"No friends available! Add a friend!")))),r.a.createElement(I.a,{xs:"2"})))}function Bt(e){e.id;var t=e.tagName,a=e.onCheck,o=Object(n.useState)(!1),c=Object(O.a)(o,2),s=c[0],l=c[1];Object(n.useEffect)((function(){a(t,s)}),[s]);return r.a.createElement(A.a,{className:"p-2"},r.a.createElement(I.a,{className:"text-center justify-content-around"},r.a.createElement(W.a,{onClick:function(){l(!s)},className:s?"p-3 m-2 account-button-checked":"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"@",t)))}function Dt(){var e=Object(l.c)(ne),t=Object(l.c)(y),a=Object(n.useState)(""),o=Object(O.a)(a,2),c=o[0],s=o[1],i=Be(),m=Object(n.useState)(!1),u=Object(O.a)(m,2),d=u[0],g=u[1],p=Object(n.useState)([]),f=Object(O.a)(p,2),b=f[0],h=f[1],v=Object(n.useState)(!1),E=Object(O.a)(v,2),x=E[0],w=E[1],j=Object(n.useState)(!1),k=Object(O.a)(j,2),C=k[0],R=k[1],M=Object(n.useState)(!0),T=Object(O.a)(M,2),H=T[0],B=T[1],D=Object(n.useRef)(null),L=Object(n.useRef)([]),z=Object(n.useState)(!1),q=Object(O.a)(z,2),F=q[0],J=q[1],Z=Object(n.useState)(""),Y=Object(O.a)(Z,2),$=(Y[0],Y[1]),U=Object(n.useState)(""),V=Object(O.a)(U,2),_=(V[0],V[1],Object(l.b)()),K=Object(l.c)(xe),G=i.width>768,X=function(){if(L.current=[],g(!1),w(!1),R(!1),function(){var a=!0;if(!1===P.conversationName.test(c)&&(L.current.push("Invalid Conversation Name"),w(!0),a=!1),1===e.filter((function(e){return e.conversationName===c})).length&&(L.current.push("Conversation with that name already exists"),w(!0),a=!1),!0===a){var n,r=Object(N.a)(b);try{var o=function(){var e=n.value;if(0===K.filter((function(t){return t.tagName===e})).length)return L.current.push("Friend with tagname ".concat(friend," isn't in your friends list")),a=!1,"break"};for(r.s();!(n=r.n()).done;){if("break"===o())break}}catch(u){r.e(u)}finally{r.f()}var s,l=Object(N.a)(e);try{for(l.s();!(s=l.n()).done;){var i=s.value,m=i.users.filter((function(e){return e.id!==t.id})).map((function(e){return e.tagName}));if(m&&m.length>0&&JSON.stringify(m)===JSON.stringify(b)){L.current.push('Chat named "'.concat(i.conversationName,'" with selected friends exists')),a=!1;break}}}catch(u){l.e(u)}finally{l.f()}}return a||g(!0),a}()){console.log("Creating new conversation and sending invites to users from friends list. Users: ",b);var a,n=Object(N.a)(b);try{var r=function(){var e=a.value;Mt&&Mt.emit("sendInvite",{sender:t,tagName:e,conversationName:c},(function(){console.log("Successfully emitted send invite to user with tagname",e)}))};for(n.s();!(a=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}toast.info("Successfully sent out conversation invites!",{position:"top-center",hideProgressBar:!0,pauseOnHover:!0})}else console.log("Errors: ",L)};return Object(n.useEffect)((function(){D&&D.current&&D.current.focus()}),[]),Object(n.useEffect)((function(){i.width,_(Ae(r.a.createElement("span",null,"New Conversation")))}),[i.width]),r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0,style:{margin:"auto",paddingLeft:G?"240px":"20px"}},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center",style:{opacity:.8,borderRadius:"10px",backgroundColor:"#191919",maxWidth:"600px"}},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"mt-2 mb-2"},r.a.createElement(Ht,{setConversationName:s,errorName:x})),r.a.createElement(A.a,{className:"mt-2 mb-2 pb-2"},r.a.createElement(Pt,{errorSearch:C,selectedFriends:b,setSelectedFriends:h,setErrorSearch:R,setError:g,errorMsgs:L,setButtonsDisabled:B})),r.a.createElement(A.a,{className:"pt-3"},r.a.createElement(Wt.a,{open:F,onClose:function(){return J(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(Tt,{handleSetConvPassword:function(e){$(e)}})),r.a.createElement(I.a,{className:"mx-auto"},r.a.createElement(W.a,{onClick:function(){return J(!0)},disabled:H,className:"rounded-pill p-2 mx-auto",variant:"outline-info",size:"lg",style:{opacity:H?.5:1,maxWidth:"200px",marginTop:"20px"}},"Set\xa0Password\xa0",r.a.createElement(At.a,{style:{width:25,height:25}})))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto"},r.a.createElement(W.a,{onClick:function(){return X()},disabled:H,className:"rounded-pill p-2 mx-auto",variant:"outline-success",size:"lg",style:{opacity:H?.5:1,maxWidth:"200px",marginTop:"20px"}},"Sent Chat Invites ",r.a.createElement(Rt.a,{style:{width:25,height:25}})))),r.a.createElement(A.a,{className:"pt-2 mt-2"},r.a.createElement(I.a,null,r.a.createElement("ul",null,d?L.current.map((function(e){return r.a.createElement("li",{key:e,className:"text-danger text-small"},e)})):"")))))))}function Lt(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(kt,null),r.a.createElement(S.a,{fluid:!0,className:"w-100 h-100"},r.a.createElement(Dt,null)))}var zt=a(105),qt=a.n(zt),Ft=a(141),Jt=a.n(Ft),Zt=a(138),Yt=a.n(Zt),$t=a(137),Ut=a.n($t),Vt=a(139),_t=a.n(Vt),Kt=a(140),Gt=a.n(Kt);a(204),a(63);function Xt(){return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",{className:"text-danger"},"About Project Zed"))),r.a.createElement(A.a,{className:"pt-2 pb-2"},r.a.createElement(I.a,{className:"mx-auto text-center text-white",xs:"12"},r.a.createElement(lt.a,null,"Blah blah blah this is my open source version of realtime e2e encrypted messaging. Email me at jakestevens081@gmail.com for questions. www.github.com/jakesteve28")))))}function Qt(e){e.logoutAccount;var t=Object(n.useState)(""),a=Object(O.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(!1),l=Object(O.a)(s,2),i=l[0],m=l[1],u=Object(n.useRef)([]),d=function(){u.current=[],m(!1),function(){var e=!0;!1===P.tagName.test(o)&&(console.log("Error: new tagname failed regex test"),u.current.push("Error: new tagname failed regex test"),e=!1),e||m(!0)}()};return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h3",null,"Change Tagname"))),r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("span",{className:"text-warning"},"Note that this is permanent, will require a logout, and will automatically update your friends' lists."))),r.a.createElement(A.a,{className:"pt-2 pb-2 mb-1"},r.a.createElement(I.a,{className:"mx-auto text-center text-white",xs:"12"},r.a.createElement(R.a,null,r.a.createElement(M.a,{style:{marginLeft:"auto",maxWidth:"300px",marginRight:"auto",color:"white",opacity:.87,minWidth:"200px",minHeight:"50px",backgroundColor:"#212121",border:"none"},placeholder:"Enter desired Tagname","aria-label":"Enter desired Tagname","aria-describedby":"basic-addon1",className:i?"change-tagname-input error-placeholder":"change-tagname-input",onChange:function(e){c(e.target.value)}})))),r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("span",{className:"text-muted font-italic"},"Must be 8-24 letters, numbers, dashes or underscores"))),r.a.createElement(A.a,{className:"pt-2 mt-2"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement(W.a,{onClick:function(){return d()},variant:"outline-success",size:"lg",style:{padding:"10px"}},"Submit")))))}var ea=a(259);function ta(e){var t=e.logoutAccount;return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Delete Account"))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement(lt.a,{className:"text-warning"},"Note that this action is PERMANENT. Once clicked, your encrypted account info, all encrypted messages, encrypted chats, and associated encrypted metadata will be killed. Your email's username and email will be flagged and not allowed for re-application. If more than three deletes come from your IP/user agent, your IP will be flagged and not allowed for re-application. If your account is flagged, reported, or disabled for suspicious content, encrypted data will be warehoused as applicable by the law."))),r.a.createElement(A.a,{className:"pt-2 mt-2"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement(W.a,{onClick:function(){return alert("You're going to be logged out now..."),void t()},variant:"outline-danger",size:"lg"},"DELETE ACCOUNT ",r.a.createElement(ea.a,null))))))}function aa(){return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Privacy and Security Disclaimers"))),r.a.createElement(A.a,{className:"pt-2 pb-2"},r.a.createElement(I.a,{className:"mx-auto text-center text-white",xs:"12"},r.a.createElement(lt.a,null,"Blah blah blah TODO")))))}function na(e){var t=e.logoutAccount;return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Reset Password"))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement(lt.a,{className:"text-warning"},"Note that this action will log and lock you out, and then send a reset link to your account's listed email."))),r.a.createElement(A.a,{className:"pt-2 mt-5"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement(W.a,{onClick:function(){return alert("You're going to be logged out now..."),void t()},variant:"outline-danger",size:"lg"},"Reset Password")))))}function ra(){var e=Object(l.c)(y),t=Object(l.b)(),a=Be(),o=Object(n.useState)(!1),c=Object(O.a)(o,2),s=c[0],i=(c[1],Object(n.useState)(!1)),m=Object(O.a)(i,2),u=m[0],d=(m[1],Object(n.useState)([])),g=Object(O.a)(d,2),f=g[0],b=(g[1],Object(n.useState)("")),h=Object(O.a)(b,2),v=h[0],x=(h[1],Object(n.useState)("")),N=Object(O.a)(x,2),w=(N[0],N[1],Object(n.useRef)(null),a.width>768),j=Object(n.useState)(!1),k=Object(O.a)(j,2),C=k[0],R=k[1],M=Object(n.useState)(!1),T=Object(O.a)(M,2),H=T[0],P=T[1],B=Object(n.useState)(!1),D=Object(O.a)(B,2),z=D[0],q=D[1],F=Object(n.useState)(!1),J=Object(O.a)(F,2),Z=J[0],Y=J[1],$=Object(n.useState)(!1),U=Object(O.a)($,2),_=U[0],K=U[1],G=function(){t(E()),t(p()),t(L()),t(V()),t(me()),t(ve()),console.log("Successfully logged out")};return Object(n.useEffect)((function(){a.width>768?t(Ae(r.a.createElement("span",null,r.a.createElement(qt.a,null),"\xa0Account Settings | @",e.tagName))):t(Ae(r.a.createElement("span",null,r.a.createElement(qt.a,null)," ",r.a.createElement("span",{className:"text-primary"},"@",e.tagName))))}),[a.width]),r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0,style:{margin:"auto",paddingLeft:w?"240px":"0px"}},r.a.createElement(A.a,{className:"pt-3"},r.a.createElement(Wt.a,{open:C,onClose:function(){return R(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(Xt,null)),r.a.createElement(Wt.a,{open:_,onClose:function(){return K(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(Qt,{logoutAccount:G})),r.a.createElement(Wt.a,{open:H,onClose:function(){return P(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(ta,{logoutAccount:G})),r.a.createElement(Wt.a,{open:z,onClose:function(){return q(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(aa,null)),r.a.createElement(Wt.a,{open:Z,onClose:function(){return Y(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(na,{logoutAccount:G}))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto p-5",xs:"8",style:{opacity:.8,borderRadius:"10px",backgroundColor:"#191919",maxWidth:"500px"}},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"pb-4 text-center lead mx-auto border-bottom border-dark",xs:"8",style:{opacity:.87,color:"#EEEEEE",fontSize:"16pt"}},"Your Account")),r.a.createElement(A.a,{className:"mb-2 mt-1"},r.a.createElement(I.a,{className:"p-2 text-center",style:{color:"#EEEEEE",opacity:.9,fontSize:"14pt"}},r.a.createElement("span",{className:"text-muted font-italic"},"Email:"),"\xa0\xa0\xa0",e.email)),r.a.createElement(A.a,{className:"p-2"},r.a.createElement(I.a,{className:"text-center justify-content-around"},r.a.createElement(W.a,{onClick:function(){Y(!0)},className:"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Reset Password  ",r.a.createElement(Ut.a,null)),r.a.createElement(W.a,{onClick:function(){K(!0)},className:"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Change Tagname ",r.a.createElement(Yt.a,null)),r.a.createElement(W.a,{onClick:function(){R(!0)},className:"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"About ",r.a.createElement(_t.a,null)),r.a.createElement(W.a,{onClick:function(){q(!0)},className:"p-3 m-2 account-button text-warning",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Privacy / Security Disclaimer ",r.a.createElement(Gt.a,null)),r.a.createElement(W.a,{onClick:function(){P(!0)},className:"p-3 m-2 account-button text-danger",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Delete Account ",r.a.createElement(Jt.a,null)))),r.a.createElement(A.a,null,s?r.a.createElement(I.a,{className:"text-center text-success lead"},v):""),r.a.createElement(A.a,null,u?r.a.createElement(I.a,null,r.a.createElement("ul",null,f.map((function(e){return r.a.createElement("li",{key:e,className:"text-center lead font-italic text-danger settings-error"},e)})))):"")))))}function oa(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(ra,null))}a(205),a(206),a(207);function ca(){var e=Object(l.c)(y);return r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login",component:Pe}),r.a.createElement(s.b,{path:"/forgotPassword",component:Le}),r.a.createElement(s.b,{path:"/createAccount",component:qe}),r.a.createElement(m,{path:"/home",component:Ct,auth:e.loggedIn}),r.a.createElement(m,{path:"/newConversation",component:Lt,auth:e.loggedIn}),r.a.createElement(m,{path:"/settings",component:oa,auth:e.loggedIn}),r.a.createElement(m,{path:"/",component:Ct,auth:e.loggedIn}))}var sa=a(263),la=a(262),ia=a(264),ma=(a(101),a(149)),ua=a.n(ma),da=a(88),ga=a.n(da),pa=a(266),fa=a(261),ba=a(260),ha=a(144),va=a.n(ha),Ea=(a(208),a(142)),ya=a.n(Ea),xa=a(143),Na=a.n(xa);function wa(e){var t=e.account,a=e.currentConversation,n=e.isOnline,o=e.tagName,c=e.conversations,s=e.history,l=e.dispatch,i=Be();return r.a.createElement(S.a,{className:"friend-list-item-row",fluid:!0},r.a.createElement(A.a,{className:"p-3"},r.a.createElement(I.a,{xs:"8",className:"".concat(n?"text-success":"text-danger"," py-auto font-italic text-sm text-center my-auto"),style:{opacity:.67}},r.a.createElement("span",{className:""},"@",o)),r.a.createElement(I.a,{xs:"4",className:"text-left"},r.a.createElement(W.a,{className:"dropdown-toggle text-white hidden-dropdown-friend-list-item",variant:"dark",style:{maxWidth:"50px",border:"none",backgroundColor:"#303030"},onClick:function(){return function(){if(c.length>0){var e,n=Object(N.a)(c);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!1===r.pending){if("/home"!==location.pathname&&s.push("/home"),a.conversationName===r.conversationName){l(_(!1)),l(U(!1));break}r&&""!==r.conversationName&&i.width>768&&a.conversationName!==r.conversationName&&l(Ae(r.conversationName)),r&&""!==r.conversationName&&i.width<=768&&a.conversationName!==r.conversationName&&l(Ae("")),l(_(!1)),l(Q({conversation:r})),l(U(!1)),_e&&_e.emit("setCurrentConversation",{user:t,conversationId:r.id},(function(){return console.log("Emitted setCurrentConversation successfully")}));break}}}catch(o){n.e(o)}finally{n.f()}}else location.pathname&&s.push("/newConversation")}()}},r.a.createElement(ga.a,null)))))}function Oa(e){var t=e.requestId,a=e.tagName,n=Object(l.c)(y);return a===n.tagName?"":r.a.createElement(A.a,{className:"friend-request-list-item p-2"},r.a.createElement(I.a,{className:"text-small text-center my-auto",style:{opacity:.67}},"Friend request from @",a),r.a.createElement(I.a,{xs:"5",className:"text-center p-2",style:{opacity:.67}},r.a.createElement(W.a,{className:"button-bg mb-1 rounded-pill",style:{border:"none",color:"#97fa93",backgroundColor:"#191919",opacity:.9},onClick:function(){Mt&&(console.log("Emitted acceptFriendRequest"),Mt.emit("acceptFriendRequest",{friendRequestId:t},(function(){console.log("Successfully emitted accept friend request")})))}},r.a.createElement(wt.a,{title:"Accept"},r.a.createElement(ya.a,null))),r.a.createElement(W.a,{className:"button-bg rounded-pill",style:{border:"none",color:"#bf2700",backgroundColor:"#191919"},onClick:function(){return alert("Decline friend request")}},r.a.createElement(wt.a,{title:"Decline"},r.a.createElement(Na.a,null)))))}function ja(e){var t=e.sender,a=e.inviteId,n=e.convId;Object(l.c)(y);return r.a.createElement(A.a,{className:"p-3 invite-hover"},r.a.createElement(I.a,{className:"text-small text-muted text-center my-auto",style:{opacity:.67}},"Chat with ","".concat(t).length>10?"".concat(t).substring(0,7)+"...":"".concat(t)),r.a.createElement(I.a,{xs:"5",className:"text-center",style:{opacity:.67}},r.a.createElement(W.a,{className:"btn-sm mb-1 rounded-pill",style:{border:"none",color:"#97fa93",backgroundColor:"#191919",opacity:.9},onClick:function(){Mt&&(console.log("Attempting to emit acceptInvite event to server for invite with id ".concat(a)),Mt.emit("acceptInvite",{inviteId:a,conversationId:n},(function(){console.log("Successfully emitted acceptInvite event to server for invite with id ".concat(a))})))}},"Accept"),r.a.createElement(W.a,{className:"btn-sm rounded-pill",style:{border:"none",color:"#bf2700",backgroundColor:"#191919"}},"Decline")))}function ka(e){e.convId;var t=e.sender,a=Object(l.c)(ne),o=Object(n.useState)(""),c=Object(O.a)(o,2),s=c[0],i=c[1];Object(n.useEffect)((function(){var e;if(a&&Array.isArray(a)){var n,r=Object(N.a)(a);try{for(r.s();!(n=r.n()).done;){var o,c=n.value,s=Object(N.a)(c.users);try{for(s.s();!(o=s.n()).done;){var l=o.value;if(l.id===t){e=JSON.parse(JSON.stringify(l));break}}}catch(m){s.e(m)}finally{s.f()}}}catch(m){r.e(m)}finally{r.f()}}e.tagName&&i(e.tagName)}),[]);return r.a.createElement(A.a,{className:"p-3 accepted-list-item"},r.a.createElement(I.a,{className:"text-small text-center my-auto",style:{opacity:.67}},"Chat with ","".concat(s).length>10?"".concat(s).substring(0,7)+"...":"".concat(s)),r.a.createElement(I.a,{xs:"5",className:"text-center pr-2",style:{opacity:.67}},r.a.createElement(W.a,{onClick:function(){alert("Todo")},className:"btn-sm mb-1 rounded-pill button-bg",style:{border:"none",backgroundColor:"#191919",opacity:.9}},r.a.createElement(wt.a,{title:"Delete"},r.a.createElement(ot.a,null)))))}var Ca=a(146),Sa=a.n(Ca),Aa=a(93),Ia=a.n(Aa),Ra=a(145),Ma=a.n(Ra),Wa=a(147),Ta=a.n(Wa),Ha=a(148),Pa=a.n(Ha);function Ba(){var e=Object(l.b)(),t=Object(s.g)(),a=Object(l.c)(z),o=Object(l.c)(y),c=Object(l.c)(xe),i=Object(l.c)(ne),m=Object(n.useState)(""),u=Object(O.a)(m,2),d=u[0],g=u[1],p=Object(n.useState)(""),f=Object(O.a)(p,2),b=f[0],h=f[1],v=Object(n.useState)(""),E=Object(O.a)(v,2),x=E[0],w=(E[1],Object(n.useState)(!1)),j=Object(O.a)(w,2),T=j[0],H=j[1],B=Object(n.useState)(!1),D=Object(O.a)(B,2),L=D[0],q=D[1],F=Object(n.useState)(null),J=Object(O.a)(F,2),Z=J[0],Y=J[1],$=Object(n.useState)(!1),U=Object(O.a)($,2),V=U[0],_=U[1],K=Object(n.useState)(!1),G=Object(O.a)(K,2),X=G[0],Q=G[1],ee=Object(n.useRef)([]),te=Object(l.c)(re),ae=function(){var e=!0;return ee.current=[],!1===P.tagName.test(d)&&(e=!1,ee.current.push("Invalid tagname. Try 8-24 letters, numbers, dashes, underscores")),c.filter((function(e){return e.tagName===d})).length>0&&(e=!1,ee.current.push("Friend already exists")),e||q(!0),e},oe=function(){if(q(!1),H(!1),ee.current&&!1!==Array.isArray(ee.current)&&0===ee.current.length||(ee.current=[]),_(!1),!1===function(){var e=!0;return ee.current=[],!1===P.tagNameSearch.test(b)&&(e=!1,ee.current.push("Invalid friend name")),o.tagName===b&&(e=!1,ee.current.push("Cannot search/send self")),e||q(!0),e}())return console.log("Error searching friend's list, invalid tag name!"),void _(!0);console.log("Filtering friend's list by tagname | ".concat(d)),c.length>1&&Y(c.filter((function(e){return e.tagName.includes(b)||b.includes(e.tagName)})))},ce=function(){var e=Object(C.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q(!1),H(!1),ee.current&&!1!==Array.isArray(ee.current)&&0===ee.current.length||(ee.current=[]),Q(!1),!1!==ae()){e.next=8;break}return console.log("Error cannot send friend request",ee),Q(!0),e.abrupt("return");case 8:a&&o&&Mt?Mt.emit("sendFriendRequest",{senderId:o.id,recipientId:d},(function(){console.log("Friend request sent to user @".concat(d))})):console.log("Error sending friend request, not connected to notifications socket");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(tt.a,{className:"ml-3 p-1",style:{backgroundColor:"#191919"}},r.a.createElement(wt.a,{title:"Friends List"},r.a.createElement(tt.a.Toggle,{as:"button",style:{border:"none",color:"white",backgroundColor:"#191919"},className:"top-dropdown-button font-weight-bold rounded-pill ml-2"},r.a.createElement(va.a,null))),r.a.createElement(tt.a.Menu,{style:{backgroundColor:"#191919",minWidth:"325px"},className:"dropdown-menu-custom-bg"},r.a.createElement(tt.a.ItemText,{className:"text-center font-weight-bold lead mb-1",style:{backgroundColor:"#191919",opacity:.9,color:"#AAAAAA"}},r.a.createElement(Ma.a,null),"\xa0\xa0Friends"),r.a.createElement(S.a,{fluid:!0,className:"h-100",style:{backgroundColor:"#191919",minWidth:"325px",paddingTop:"20px"}},r.a.createElement(A.a,{className:"m-1"},r.a.createElement(I.a,{xs:"10"},r.a.createElement(R.a,null,r.a.createElement(M.a,{style:{marginLeft:"auto",maxWidth:"250px",marginRight:"auto",color:"white",opacity:.87,minWidth:"200px",minHeight:"50px",backgroundColor:"#202020",border:"none"},placeholder:"Add Friend By Tagname","aria-label":"Add Friend By Tagname","aria-describedby":"basic-addon1",className:X?"search-friend-bar error-placeholder":"search-friend-bar",onChange:function(e){g(e.target.value)}}))),r.a.createElement(I.a,{xs:"2"},r.a.createElement(W.a,{variant:"dark",className:"mr-3 pr-2",style:{display:"block",marginRight:"auto",marginLeft:"-15px",backgroundColor:"#191919",border:"none",color:"#555555"},onClick:function(){return ce()},disabled:d.length<8},r.a.createElement(Sa.a,{className:X?"error-icon":"",style:{height:30,width:30,color:"#AAAAAA"}})))),r.a.createElement(A.a,{className:"m-1 mt-2 mb-2 mb-1 pb-3"},r.a.createElement(I.a,{xs:"10"},r.a.createElement(R.a,null,r.a.createElement(M.a,{style:{marginLeft:"auto",maxWidth:"250px",marginRight:"auto",color:"white",opacity:.87,minWidth:"200px",minHeight:"50px",backgroundColor:"#202020",border:"none"},placeholder:"Search Friends...","aria-label":"Search Friends...","aria-describedby":"basic-addon1",className:V?"search-friend-bar error-placeholder":"search-friend-bar",onChange:function(e){h(e.target.value)}}))),r.a.createElement(I.a,{xs:"2"},r.a.createElement(W.a,{variant:"dark",style:{display:"block",marginRight:"auto",marginLeft:"-15px",backgroundColor:"#191919",border:"none",color:"#555555"},onClick:function(){return oe()}},r.a.createElement(Nt.a,{className:V?"error-icon":"",style:{height:30,width:30,color:"#AAAAAA"}})))),r.a.createElement(A.a,{style:{maxWidth:"250px",minWidth:"250px",overflowY:"scroll",marginRight:"auto",marginLeft:"15px"},className:"mt-1 pb-1"},r.a.createElement(I.a,{style:{maxHeight:"190px"}},Array.isArray(Z)?Z.map((function(a){var n=[];if(i&&Array.isArray(i)){var c,s=Object(N.a)(i);try{for(s.s();!(c=s.n()).done;){var l=c.value;if(l.users&&Array.isArray(l.users)){var m,u=Object(N.a)(l.users);try{for(u.s();!(m=u.n()).done;){if(m.value.tagName===a.tagName){n.push(l);break}}}catch(d){u.e(d)}finally{u.f()}}}}catch(d){s.e(d)}finally{s.f()}}return a&&a.tagName?r.a.createElement(A.a,{key:a.tagName,style:{maxHeight:"65px",backgroundColor:"#505050"},className:"friend-topbar"},r.a.createElement(wa,{account:o,currentConversation:te,history:t,dispatch:e,conversations:n,key:a.tagName,tagName:a.tagName,isOnline:a.isOnline})):null})):c.map((function(a){if(a&&a.tagName){var n=[];if(i&&Array.isArray(i)){var c,s=Object(N.a)(i);try{for(s.s();!(c=s.n()).done;){var l=c.value;if(l.users&&Array.isArray(l.users)){var m,u=Object(N.a)(l.users);try{for(u.s();!(m=u.n()).done;){if(m.value.tagName===a.tagName){n.push(l);break}}}catch(d){u.e(d)}finally{u.f()}}}}catch(d){s.e(d)}finally{s.f()}}return r.a.createElement(A.a,{key:a.tagName,style:{maxHeight:"65px",backgroundColor:"#505050"},className:"friend-topbar"},r.a.createElement(wa,{account:o,currentConversation:te,history:t,dispatch:e,conversations:n,key:a.tagName,tagName:a.tagName,isOnline:a.isOnline}))}return null}))))),L?r.a.createElement(S.a,{fluid:!0,className:"text-left lead",style:{opacity:.9}},r.a.createElement(A.a,{className:"font-italic text-danger",style:{margin:"20px",borderBottom:"1px solid red",opacity:.87}},"Errors:"),r.a.createElement(A.a,null,r.a.createElement("ul",null,ee.current.map((function(e){return r.a.createElement("li",{className:"text-danger text-small",key:e},e)}))))):"",T?r.a.createElement(S.a,{fluid:!0,className:"text-left",style:{opacity:.9}},r.a.createElement(A.a,{className:"font-italic text-success",style:{margin:"20px",opacity:.87}},x)):""))}function Da(){var e=Object(l.c)(ge),t=Object(l.c)(Ne),a=Object(l.c)(pe),n=Object(l.c)(y);return r.a.createElement(tt.a,{className:"ml-3 p-1 topbar-dropdown",style:{backgroundColor:"#191919",opacity:.95}},r.a.createElement(wt.a,{title:"Notifications"},r.a.createElement(tt.a.Toggle,{as:"button",style:{border:"none",color:"white",backgroundColor:"#191919"},className:"top-dropdown-button font-weight-bold rounded-pill ml-2"},e.length>=1||t.length>=1?r.a.createElement(ba.a,{color:"default",overlap:"circle",badgeContent:" ",variant:"dot"},r.a.createElement(Ia.a,null)):r.a.createElement(Ia.a,null))),r.a.createElement(tt.a.Menu,{className:"dropdown-menu-custom-bg",style:{backgroundColor:"#191919",minWidth:"350px"}},r.a.createElement(tt.a.ItemText,{className:"text-center font-weight-bold lead p-3 pb-2",style:{opacity:.9,color:"#AAAAAA"}},r.a.createElement(Ia.a,null),"\xa0\xa0Notifications"),r.a.createElement(S.a,{fluid:!0,style:{maxHeight:"250px",minHeight:"250px",minWidth:"250px",overflowY:"scroll"}},r.a.createElement(pa.a,{className:"tabs-notifications",defaultActiveKey:"received",id:"uncontrolled-tab-example"},r.a.createElement(fa.a,{className:"tab-notifications",eventKey:"received",title:"Received"},t.filter((function(e){return e.recipientId===n.id})).map((function(e){return e&&!1===e.accepted&&!1===e.cancelled&&e.sender.id!==n.id?r.a.createElement(Oa,{requestId:e.id,recipientId:e.recipientId,sender:e.sender,tagName:e.sender.tagName,key:"".concat(e.id)}):null})),e.map((function(e){return r.a.createElement(ja,{sender:e.sender?e.sender:"".concat(e.senderId),key:"".concat(Math.random()),convId:"".concat(e.conversationId),inviteId:"".concat(e.id)})}))),r.a.createElement(fa.a,{eventKey:"accepted",title:"Accepted"},a.map((function(e){return r.a.createElement(ka,{sender:"".concat(e.senderId),key:"".concat(Math.random()),convId:"".concat(e.conversationId),inviteId:"".concat(e.id)})})))))))}function La(){var e=Object(l.b)();return r.a.createElement(tt.a,{className:"topbar-dropdown",style:{backgroundColor:"#191919",position:"relative",maxWidth:"100px",opacity:.9}},r.a.createElement(tt.a.Toggle,{className:"dropdown-toggle text-white",style:{border:" none",backgroundColor:"#191919"},as:"button",id:"dropdown-custom-2"},r.a.createElement(nt.a,null)),r.a.createElement(tt.a.Menu,{className:"dropdown-menu-custom-bg-settings",style:{backgroundColor:"#191919",maxWidth:"100px"}},r.a.createElement(tt.a.Item,{className:"text-white text-center dropdown-item-settings",style:{backgroundColor:"#404040",padding:"15px"},as:"button",onClick:function(){return document.querySelector("#accountSettings").click()}},r.a.createElement(H.b,{id:"accountSettings",as:"button",style:{textDecoration:"none",color:"#AAAAAA"},to:"/settings"},"Account\xa0",r.a.createElement(Ta.a,null))),r.a.createElement(tt.a.Item,{className:"text-white text-center dropdown-item-settings",style:{backgroundColor:"#404040",padding:"15px"},as:"button",onClick:function(){e(E()),e(p()),e(L()),e(V()),e(me()),e(ve()),console.log("Successfully logged out")}},r.a.createElement(H.b,{style:{textDecoration:"none",color:"#AAAAAA"},to:"/login"},"Logout\xa0",r.a.createElement(Pa.a,null)))))}var za=Object(Et.a)((function(e){return{root:{display:"flex",flexGrow:1,backgroundColor:"#191919",height:"100%",opacity:.87},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#191919"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"white"},menu:{backgroundColor:"#404040"}}}));function qa(){var e=Object(l.c)(oe),t=Object(l.c)(ce),a=Object(l.b)();return r.a.createElement("div",null,r.a.createElement(H.b,{id:"startChat",style:{display:"none"},to:"/newConversation"}),r.a.createElement(W.a,{onClick:Object(C.a)(k.a.mark((function n(){return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&a(U(!1)),e&&a(_(!1)),document.getElementById("startChat").click();case 3:case"end":return n.stop()}}),n)}))),variant:"primary",className:"rounded-pill mx-auto my-form-control-button",style:{opacity:.75,boxShadow:"black 5px 5px "}},r.a.createElement(ga.a,null)," Start chat"))}function Fa(){var e=Be(),t=za(),a=Object(l.c)(y),n=Object(l.b)(),o=e.width<768,c=(Object(l.c)(re),Object(l.c)(oe),Object(l.c)(ce)),i=Object(s.h)(),m=Object(l.c)(Re);return r.a.createElement(la.a,null,r.a.createElement(sa.a,{position:"fixed",className:t.appBar},r.a.createElement(vt.a,null,r.a.createElement(ia.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"}),r.a.createElement(lt.a,{component:"span",className:t.title},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"text-center"},a.loggedIn&&o&&!c?r.a.createElement(W.a,{style:{backgroundColor:"#191919",border:"none"},onClick:function(){n(U(!c))}},r.a.createElement(ua.a,null)):"",a.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(qa,null),r.a.createElement(Da,null),r.a.createElement(Ba,null)):""))),e.width>768?r.a.createElement(lt.a,{component:"span",variant:"h4",className:t.title},r.a.createElement("span",{style:{opacity:.67},className:"text-white lead"},m)):"",!1===a.loggedIn&&"/login"!==i.pathname?r.a.createElement(H.b,{className:"rounded-pill btn btn-outline-primary mr-5 rounded-pill",style:{opacity:.67},renderas:W.a,to:"/login"},"Login"):"",a.loggedIn?r.a.createElement(La,null):"")))}c.a.render(r.a.createElement("div",{className:"base-div",style:{backgroundColor:"#191919"}},r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:Ue},r.a.createElement(H.a,{basename:"/api/client/"},r.a.createElement(n.Suspense,{fallback:null},r.a.createElement(Fa,null),r.a.createElement(ca,null)))))),document.getElementById("root"))},63:function(e,t,a){}},[[158,1,2]]]);
//# sourceMappingURL=main.11ba09b9.chunk.js.map