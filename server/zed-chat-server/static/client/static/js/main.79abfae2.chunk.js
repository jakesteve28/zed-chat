(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{103:function(e,t,a){},111:function(e,t,a){},114:function(e,t,a){},127:function(e,t,a){},162:function(e,t,a){e.exports=a(211)},174:function(e,t,a){},176:function(e,t,a){},199:function(e,t){},202:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},208:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(10),c=a.n(o),s=(a(111),a(11)),l=a.n(s),i=a(18),u=a(21),m=a(3),d=a(154),g=function(e){var t=e.component,a=e.auth,n=Object(d.a)(e,["component","auth"]);return r.a.createElement(u.b,Object.assign({},n,{render:function(e){return!0===a?r.a.createElement(t,e):r.a.createElement(u.a,{to:"/login"})}}))},p=a(25),f=Object(p.b)({name:"account",initialState:{email:"",tagName:"",loggedIn:!1,id:""},reducers:{clearAccount:function(e){e.email="",e.tagName="",e.loggedIn=!1,e.id=""},setEmail:function(e,t){e.email=t.payload},setTagName:function(e,t){e.tagName=t.payload},login:function(e){e.loggedIn=!0},logout:function(e){e.loggedIn=!1},setId:function(e,t){e.id=t.payload}}}),b=f.actions,h=b.clearAccount,v=b.setId,E=b.setEmail,y=b.setTagName,x=b.login,N=b.logout,w=function(e){return{id:e.account.id,email:e.account.email,tagName:e.account.tagName,loggedIn:e.account.loggedIn}},O=f.reducer,j=a(15),k=a(39),C=a(2),S=a(247),A=a(248),I=a(249),R=a(250),M=a(251),T=a(274),W=a(132),H=a(24),P={tagNameSearch:/^([a-zA-Z0-9_-]){1,20}$/,tagName:/^([a-zA-Z0-9_-]){8,20}$/,password:/^([a-zA-Z0-9\_\-\$\#\%\^\&\*\(\)]){8,32}$/,email:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/,firstName:/^([A-Z]){1}([a-zA-Z]){1,32}$/,lastName:/^([A-Z]){1}([a-zA-Z]){1,32}$/,messageBody:/^(.){1,200}$/,conversationName:/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]){4,64}$/},B=(a(174),a(78)),D=Object(p.b)({name:"conversations",initialState:{conversations:[],currentConversation:{messages:[],joined:!1,typing:!1,id:0},defaultView:!0,showConvList:!1},reducers:{clearConversations:function(e){e.conversations=[],e.currentConversation={messages:[],joined:!1,typing:!1,id:0},e.defaultView=!0,e.showConvList=!1},addConversation:function(e,t){e.conversations.filter((function(e){return e.id===t.payload.conversation.id})).length>0?console.log("Error: cannot add conversation because one already exists in store"):e.conversations.push(t.payload.conversation)},removeConversation:function(e,t){e.conversations=e.conversations.filter((function(e){return e.id!==t.payload.id}))},setCurrentConversation:function(e,t){e.conversations.filter((function(e){return e.id===t.payload.conversation.id})).length<1?console.log("Error: cannot set current conversation to a conversation that doesn't exist in the store"):e.currentConversation=t.payload.conversation},addMessage:function(e,t){var a,n=Object(B.a)(e.conversations,(function(e){})),r=Object(j.a)(n);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.id===t.payload.conversation.id){if(!Array.isArray(o.messages)){console.log("Messages don't exist yet"),o.messages=[],o.messages.push(t.payload.message),o.numberOfMessages<o.messages.length&&(o.numberOfMessages=o.messages.length);break}if(o.messages.filter((function(e){return e.id===t.payload.message.id})).length>0){console.log("Error: Cannot add message because it already exists in the state!");break}if(o.id===e.currentConversation.id){Array.isArray(e.currentConversation.messages)&&e.currentConversation.messages||(e.currentConversation.messages=[]),e.currentConversation.messages.push(t.payload.message),e.currentConversation.numberOfMessages<e.currentConversation.messages.length&&(e.currentConversation.numberOfMessages=e.currentConversation.messages.length);break}if(Array.isArray(o.messages)){o.messages.push(t.payload.message),o.numberOfMessages<o.messages.length&&(o.numberOfMessages=o.messages.length);break}}}}catch(c){r.e(c)}finally{r.f()}e.conversations=Object(B.a)(n,(function(e){}))},removeMessage:function(e,t){var a=t.payload,n=a.conversationId,r=a.messageId;(e.currentConversation=n)&&(e.currentConversation.messages=e.currentConversation.messages.filter((function(e){return e.id!==r})));var o,c=Object(j.a)(null===e||void 0===e?void 0:e.conversations);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.id===n&&(s.messages=s.messages.filter((function(e){return e.id!==r})))}}catch(l){c.e(l)}finally{c.f()}},setJoined:function(e,t){e.currentConversation.joined=t.payload},setRead:function(e,t){var a=e.conversations.filter((function(e){return e.id===t.payload.convId}))[0];if(a){var n=a.messages.filter((function(e){return e.id===t.payload.messageId}))[0];n&&(n.read=!0)}},setTyping:function(e,t){e.currentConversation.typing=t.payload},setView:function(e,t){e.defaultView=t.payload},setShowConvList:function(e,t){e.showConvList=t.payload},sortMessages:function(e,t){e.currentConversation.messages.length>1&&e.currentConversation.messages.sort((function(e,t){return Date.parse(e.createdAt)-Date.parse(t.createdAt)}))},pinMessage:function(e,t){var a,n=Object(j.a)(e.conversations);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(t.payload.conversation.id===r.id){var o,c=Object(j.a)(r.messages);try{for(c.s();!(o=c.n()).done;){var s=o.value;s.id===t.payload.id&&(s.pinned=t.payload.pinned)}}catch(l){c.e(l)}finally{c.f()}}}}catch(l){n.e(l)}finally{n.f()}},batchAddMessages:function(e,t){var a,n=t.payload,r=n.messages,o=n.conversationId,c=Object(j.a)(r);try{for(c.s();!(a=c.n()).done;){var s=a.value;s.conversation.id===e.currentConversation.id&&e.currentConversation.id===o&&(e.currentConversation.messages.push(s),e.currentConversation.numberOfMessages<e.currentConversation.messages.length&&(e.currentConversation.numberOfMessages=e.currentConversation.messages.length))}}catch(l){c.e(l)}finally{c.f()}}}}),L=D.actions,z=L.batchAddMessages,q=(L.removeMessage,L.sortMessages),F=L.setShowConvList,J=L.clearConversations,U=L.setView,Z=L.setTyping,Y=L.setRead,$=(L.setJoined,L.addMessage),V=L.setCurrentConversation,_=L.addConversation,K=L.removeConversation,G=L.pinMessage,X=function(e){return e.conversations.conversations},Q=function(e){return e.conversations.currentConversation},ee=function(e){return e.conversations.defaultView},te=function(e){return e.conversations.showConvList},ae=D.reducer,ne=Object(p.b)({name:"invite",initialState:{sentInvites:[],receivedInvites:[],acceptedInvites:[]},reducers:{clearInvites:function(e){e.sentInvites=[],e.receivedInvites=[],e.acceptedInvites=[]},addSentInvite:function(e,t){e.sentInvites.push(t.payload)},addReceivedInvite:function(e,t){e.receivedInvites.push(t.payload)},removeSentInvite:function(e,t){e.sentInvites=e.sentInvites.filter((function(e){return e.id!==t.payload}))},removeReceivedInvite:function(e,t){e.receivedInvites=e.receivedInvites.filter((function(e){return e.id!==t.payload}))},addAcceptedInvite:function(e,t){e.acceptedInvites.push(t.payload)}}}),re=ne.actions,oe=re.clearInvites,ce=(re.addSentInvite,re.addReceivedInvite),se=(re.removeSentInvite,re.removeReceivedInvite,re.addAcceptedInvite),le=function(e){return e.invite.receivedInvites},ie=function(e){return e.invite.acceptedInvites},ue=ne.reducer,me=Object(p.b)({name:"friends",initialState:{friends:[],friendRequests:[]},reducers:{clearFriends:function(e){e.friendRequests=[],e.friends=[]},addFriend:function(e,t){e.friends.filter((function(e){return e.id===t.payload.id||e.tagName===t.payload.tagName})).length>0||(t.payload.password&&delete t.payload.password,e.friends=[].concat(Object(k.a)(e.friends),[t.payload]))},removeFriend:function(e,t){e.friends=e.friends.filter((function(e){return e.id!==t.payload}))},addFriendRequest:function(e,t){e.friendRequests.filter((function(e){return e.id===t.payload.id})).length>0||(e.friendRequests=[].concat(Object(k.a)(e.friendRequests),[t.payload]))},removeFriendRequest:function(e,t){e.friendRequests=e.friendRequests.filter((function(e){return e.id!==t.payload}))},declineRequest:function(e,t){var a=e.friendRequests.filter((function(e){return e.id===t.payload}))[0];a&&(a.cancelled=!0)},acceptRequest:function(e,t){var a=e.friendRequests.filter((function(e){return e.id===t.payload}))[0];a&&(a.accepted=!0)}}}),de=me.actions,ge=de.clearFriends,pe=de.addFriend,fe=(de.removeFriend,de.addFriendRequest),be=(de.removeFriendRequest,de.declineRequest,de.acceptRequest,function(e){return e.friends.friends}),he=function(e){return e.friends.friendRequests},ve=me.reducer,Ee="hidden",ye="show",xe="full",Ne=Object(p.b)({name:"ui",initialState:{sidebarState:"hidden",topbarMessage:"",accountBackground:"",backgroundColor:"#191919",backgroundTint:"transparent",conversationBackground:"mthood"},reducers:{setSidebarState:function(e,t){switch(t.payload){case t.payload===Ee&&e.sidebarState!==Ee:e.sidebarState=Ee;break;case t.payload===ye&&e.sidebarState!==ye:e.sidebarState=ye;break;case t.payload===xe&&e.sidebarState!==xe:e.sidebarState=xe;break;default:e.sidebarState=ye}},setTopbarMessage:function(e,t){e.topbarMessage=t.payload},setDefaultBackground:function(e,t){e.defaultBackground=t.payload},setColor:function(e,t){e.backgroundColor=t.payload},setTint:function(e,t){e.backgroundTint=t.payload},setConversationBackground:function(e,t){e.conversationBackground=t.payload}}}),we=Ne.actions,Oe=(we.setSidebarState,we.setTopbarMessage),je=(we.setDefaultBackground,we.setColor,we.setTint,we.setConversationBackground,function(e){return e.ui.sidebarState}),ke=function(e){return e.ui.topbarMessage},Ce=Ne.reducer,Se=Object(p.b)({name:"auth",initialState:{username:"",token:""},reducers:{setUserName:function(e,t){e.username=t.payload},setToken:function(e,t){e.token=t.payload},clearAuth:function(e){e.username="",e.token=""}}}),Ae=Se.actions,Ie=Ae.clearAuth,Re=(Ae.setUserName,Ae.setToken,function(e){return e.auth.token}),Me=Se.reducer,Te=Object(p.b)({name:"globals",initialState:{devHost:"http://localhost:3000",prodHost:"http://localhost:3000",testHost:"http://localhost:3000",metadata:"",api:"http://localhost:3000",refreshExpire:-1},reducers:{setMetadata:function(e,t){e.metadata=t.payload},setRefreshExpire:function(e,t){e.refreshExpire=t.payload}}}),We=Te.actions,He=(We.setMetadata,We.setRefreshExpire),Pe=function(e){return e.globals.prodHost},Be=function(e){return e.globals.refreshExpire},De=Te.reducer,Le=Object(p.a)({reducer:{auth:Me,conversations:ae,account:O,invite:ue,friends:ve,globals:De,ui:Ce}}),ze=function(){var e=Object(i.a)(l.a.mark((function e(t,a){var n,r,o,c,s,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("http://localhost:3000/api/auth/login",{body:JSON.stringify({tagName:"".concat(t),password:"".concat(a)}),headers:{"content-type":"application/json"},method:"POST"});case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,o=r.statusCode,c=r.id,s=r.user,i=r.invites,u=r.refreshToken,401!==o&&400!==o){e.next=11;break}return console.log("Error: Unauthorized, invalid credentials"),e.abrupt("return",!1);case 11:if(500!==o){e.next=14;break}return console.log("Error: Server error while attempting login!"),e.abrupt("return",!1);case 14:return!0===u&&console.log("Refresh token successfully set and will timeout in"),console.log("Successfully logging in user",s.tagName),e.abrupt("return",{user:s,id:c,invites:i,refreshToken:u});case 19:return e.prev=19,e.t0=e.catch(0),console.log("Error: Unable to login. Please refresh.",e.t0),e.abrupt("return",!1);case 23:case"end":return e.stop()}}),e,null,[[0,19]])})));return function(t,a){return e.apply(this,arguments)}}(),qe=function(e,t,a){return!!(e&&t&&(null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.tagName)&&Array.isArray(null===t||void 0===t?void 0:t.conversations)&&Array.isArray(null===t||void 0===t?void 0:t.friends)&&Array.isArray(null===t||void 0===t?void 0:t.friendRequests)&&Array.isArray(a))};var Fe=function(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(C.a)(c,2),d=s[0],g=s[1],p=Object(n.useState)(!1),f=Object(C.a)(p,2),b=f[0],h=f[1],N=Object(n.useState)(!1),O=Object(C.a)(N,2),B=O[0],D=O[1],L=Object(n.useState)([]),z=Object(C.a)(L,2),q=z[0],F=z[1],J=Object(m.b)(),U=Object(m.c)(w),Z=Object(n.useState)(!1),Y=Object(C.a)(Z,2),$=Y[0],V=Y[1],K=Object(n.useState)(!1),G=Object(C.a)(K,2),X=G[0],Q=G[1],ee=Object(n.useRef)(null);Object(m.c)(Be),Object(n.useEffect)((function(){ee.current&&ee.current.focus()}),[]),Object(n.useEffect)(Object(i.a)(l.a.mark((function e(){var t,a,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!1!==X){e.next=22;break}return Q(!0),e.next=5,fetch("http://localhost:3000/api/auth/refreshAccount",{credentials:"include"});case 5:if(!(t=e.sent)){e.next=22;break}return e.next=9,t.json();case 9:if(401===(null===(a=e.sent)||void 0===a?void 0:a.statusCode)&&(console.log(a),console.log("No valid refresh token. User must login"),h(!0),V(!1),Q(!1)),n=a.id,r=a.user,o=a.invites,!0===a.refreshToken&&J(He(Date.now()+875e3)),!1!==qe(n,r,o)){e.next=17;break}return V(!1),Q(!1),e.abrupt("return");case 17:ne({user:r,invites:o}),J(x()),console.log("Successfully logged in user "+(null===r||void 0===r?void 0:r.tagName)),V(!1),Q(!1);case 22:e.next=29;break;case 24:e.prev=24,e.t0=e.catch(0),console.log(res),console.log("No valid refresh token. User must login",e.t0),h(!0);case 29:case"end":return e.stop()}}),e,null,[[0,24]])}))),[]);var te=function(){var e=!0;return!1===P.tagName.test(a)&&(F(["Tag name must be 8-24 characters"].concat(Object(k.a)(q))),e=!1),!1===P.password.test(d)&&(F(["Password must be 8-32 characters"].concat(Object(k.a)(q))),e=!1),e||D(!0),e};Object(n.useEffect)((function(){J(Oe(""))}),[]);var ae=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D(!1),F([]),V(!0),te()){e.next=7;break}return console.log("Invalid form field inputs",q),V(!1),e.abrupt("return");case 7:return e.next=9,ze(a,d);case 9:if(!1!==(t=e.sent)){e.next=15;break}return D(!0),V(!1),F(["Invalid Credentials"].concat(Object(k.a)(q))),e.abrupt("return");case 15:if(n=t.id,r=t.user,o=t.invites,!0===t.refreshToken&&J(He(Date.now()+875e3)),!1!==qe(n,r,o)){e.next=22;break}return D(!0),V(!1),F(["Invalid Credentials"].concat(Object(k.a)(q))),e.abrupt("return");case 22:ne({user:r,invites:o}),J(x()),console.log("Successfully logged in user "+(null===r||void 0===r?void 0:r.tagName)),V(!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(e){var t=e.user,a=e.invites;if(J(E(null===t||void 0===t?void 0:t.email)),J(y(null===t||void 0===t?void 0:t.tagName)),J(v(null===t||void 0===t?void 0:t.id)),t.conversations.map((function(e){!0!==e.pending&&J(_({conversation:e}))})),t.friends.map((function(e){J(pe(e))})),t.friendRequests&&Array.isArray(null===t||void 0===t?void 0:t.friendRequests)){var n,r=Object(j.a)(null===t||void 0===t?void 0:t.friendRequests);try{for(r.s();!(n=r.n()).done;){var o=n.value;(null===o||void 0===o?void 0:o.recipientId)===(null===t||void 0===t?void 0:t.id)&&J(fe(o))}}catch(i){r.e(i)}finally{r.f()}}if(a&&Array.isArray(a)){var c,s=Object(j.a)(a);try{for(s.s();!(c=s.n()).done;){var l=c.value;!0===(null===l||void 0===l?void 0:l.accepted)?J(se(l)):J(ce(l))}}catch(i){s.e(i)}finally{s.f()}}};return(null===U||void 0===U?void 0:U.loggedIn)?r.a.createElement(u.a,{to:"/home"}):r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0},r.a.createElement(A.a,{className:"p-3 mt-5 text-white lead text-center"},r.a.createElement(I.a,{className:"p-3 text-center, mx-auto pt-5 mt-5 shadow",style:{borderRadius:"15px",backgroundColor:"#191919",opacity:.6,maxWidth:"500px"}},r.a.createElement("h2",{className:"text-white",style:{opacity:.8,marginBottom:"35px"}},"Welcome to ",r.a.createElement("span",{className:"text-danger"},"Project Zed")),r.a.createElement("h6",{className:"text-muted font-italic",style:{marginBottom:"35px"}},"Secured by you, for you"),X?r.a.createElement(S.a,{fluid:!0,className:"text-center"},r.a.createElement(A.a,{className:"text-center pb-2"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement("h6",null,"Welcome Back!"))),r.a.createElement(A.a,{className:"text-center pb-2"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement("span",{className:"text-muted"},"Logging Back In!"))),r.a.createElement(A.a,{className:"text-center pt-4 pb-2"},r.a.createElement(I.a,null,r.a.createElement(R.a,{animation:"border",className:"mb-4",style:{height:100,width:100},variant:"success"})))):r.a.createElement("div",null,r.a.createElement(M.a,{className:"mb-5 mt-3"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"@Tagname","aria-label":"@Tagname","aria-describedby":"basic-addon1",onKeyPress:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,ae();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:function(e){return o(e.target.value)},ref:ee})),r.a.createElement(M.a,{className:"mb-5"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},type:"password",placeholder:"Password","aria-label":"Password","aria-describedby":"basic-addon1",onKeyPress:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,ae();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:function(e){return g(e.target.value)}})),r.a.createElement(S.a,{fluid:!0,className:"border-top border-dark pt-2"},r.a.createElement(A.a,{className:"mt-3"},r.a.createElement(I.a,null,r.a.createElement(W.a,{style:{marginRight:30,backgroundColor:"#191919",color:"white",opacity:.87,border:"none"},variant:"dark",className:"mx-auto button-outline-black",onClick:function(){return document.getElementById("link-create-account").click()}},r.a.createElement(H.b,{id:"link-create-account",style:{textDecoration:"none",color:"white"},to:"/createAccount"},"Create\xa0Account")))),r.a.createElement(A.a,{className:"mt-3"},r.a.createElement(I.a,null,r.a.createElement(W.a,{style:{color:"white",backgroundColor:"#191919",opacity:.87,border:"none"},variant:"dark",className:"mx-auto button-outline-black ",onClick:function(){return document.getElementById("link-forgot-password").click()}},r.a.createElement(H.b,{id:"link-forgot-password",style:{textDecoration:"none",color:"white"},to:"/forgotPassword"},"Forgot\xa0Password?")))),r.a.createElement(A.a,{className:"mt-3 mb-2"},r.a.createElement(I.a,null,$?r.a.createElement(R.a,{animation:"border",className:"mb-4",style:{height:60,width:60},variant:"success"}):r.a.createElement(W.a,{onClick:ae,size:"lg",className:"rounded-pill mb-4 mx-auto",variant:"outline-success",style:{opacity:.8,maxWidth:"200px",marginTop:"20px"},block:!0,disabled:!b},"Login"))),r.a.createElement(A.a,{className:"mt-3 mb-3"},B?r.a.createElement(I.a,{className:"text-center"},r.a.createElement("ul",null,q.map((function(e){return r.a.createElement("li",{key:e,className:"text-danger text-center lead font-italic"},e)})))):"",$?r.a.createElement(I.a,{className:"text-center"},r.a.createElement("span",{className:"text-success lead font-italic font-weight-bolder",style:{opacity:1,fontSize:"15pt"}},"Logging in...")):""))))))};a(176);function Je(){return r.a.createElement("div",{key:"login-screen-div",className:"w-100 h-100"},r.a.createElement(Fe,null))}a(114);function Ue(){var e=Object(n.useState)({width:void 0,height:void 0}),t=Object(C.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),a}function Ze(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(C.a)(c,2),l=s[0],i=s[1],u=Object(n.useState)(!1),d=Object(C.a)(u,2),g=d[0],p=d[1],f=Object(n.useState)([]),b=Object(C.a)(f,2),h=b[0],v=b[1],E=Object(n.useState)(!1),y=Object(C.a)(E,2),x=y[0],N=y[1],w=Object(n.useState)(!1),O=Object(C.a)(w,2),j=O[0],k=O[1],R=(Ue(),Object(m.b)());return Object(n.useEffect)((function(){R(Oe(""))}),[]),r.a.createElement(S.a,{className:"h-100 w-100 pb-5",fluid:!0},r.a.createElement(A.a,{className:"p-3 mt-5 text-white lead text-center"},r.a.createElement(I.a,{className:"p-3 text-center, mx-auto pt-5 mt-5 shadow",style:{borderRadius:"15px",backgroundColor:"#191919",opacity:.6,maxWidth:"500px"}},r.a.createElement("h4",{className:"text-white",style:{opacity:.8,marginBottom:"35px"}},"Forgotten Password"),r.a.createElement(M.a,{className:"mb-5 mt-3"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Enter Your Tagname","aria-label":"Enter Your Tagname","aria-describedby":"basic-addon1",className:j?"form-control-error":"form-control-normal",onChange:function(e){i(e.target.value)}})),r.a.createElement(M.a,{className:"mb-5 mt-3"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Enter Your Email","aria-label":"Enter Your Email","aria-describedby":"basic-addon1",className:x?"form-control-error":"form-control-normal",onChange:function(e){return o(e.target.value)}})),r.a.createElement(W.a,{onClick:function(){N(!1),k(!1),v([]),p(!1),function(){var e=!0,t=[];return!1===P.email.test(a)&&(t.push("Invalid Email Address!"),N(!0),e=!1),!1===P.tagName.test(l)&&(t.push("Tag name must be 8-24 characters"),k(!0),e=!1),e||(v(t),p(!0)),e}()?console.log("Sending forgot password request for user @".concat(l," with email ").concat(a)):console.log("Error with data submission: ",h)},size:"lg",className:"rounded-pill mb-4 mx-auto",variant:"outline-success",style:{opacity:.8,maxWidth:"200px"},block:!0},"Reset Password"),r.a.createElement(S.a,{fluid:!0,style:{opacity:1.2}},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-left"},r.a.createElement("ul",{style:{listStyleType:"none",marginRight:"auto",marginLeft:"auto",paddingRight:"30px"}},g?r.a.createElement("li",null,r.a.createElement("h6",{className:"border-bottom pb-2 border-danger text-danger font-weight-bold"},"Errors")):"",g?h.map((function(e){return r.a.createElement("li",{key:e,className:"font-italic lead text-danger"},e)})):"")))))))}function Ye(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(Ze,null))}var $e=function(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),s=Object(C.a)(c,2),d=s[0],g=s[1],p=Object(n.useState)(""),f=Object(C.a)(p,2),b=f[0],h=f[1],v=Object(n.useState)(""),E=Object(C.a)(v,2),y=E[0],x=E[1],N=Object(n.useState)(!1),w=Object(C.a)(N,2),O=w[0],j=w[1],k=Object(n.useState)(!1),R=Object(C.a)(k,2),H=R[0],B=R[1],D=Object(n.useState)([]),L=Object(C.a)(D,2),z=L[0],q=L[1],F=Object(n.useState)(!1),J=Object(C.a)(F,2),U=J[0],Z=J[1],Y=Object(n.useState)(!1),$=Object(C.a)(Y,2),V=$[0],_=$[1],K=Object(n.useState)(!1),G=Object(C.a)(K,2),X=G[0],Q=G[1],ee=Object(n.useState)(!1),te=Object(C.a)(ee,2),ae=te[0],ne=te[1],re=Object(n.useState)(!1),oe=Object(C.a)(re,2),ce=oe[0],se=oe[1],le=(Ue(),Object(m.b)()),ie=function(){var e=!0,t=[];return b!==y&&(t.push("Passwords don't match"),Z(!0),e=!1),!1===P.tagName.test(a)&&(t.push("Invalid Tagname"),_(!0),e=!1),!1===P.email.test(d)&&(t.push("Invalid Email"),Q(!0),e=!1),!1===P.password.test(b)&&(t.push("Invalid Password. Must be 10-32 characters and digits."),ne(!0),e=!1),!1===P.password.test(y)&&(t.push("Invalid Second Password. Must be 10-32 characters and digits."),q(t),ne(!0),e=!1),e||(B(!0),q(t)),e},ue=function(){var e=Object(i.a)(l.a.mark((function e(){var t,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B(!1),Z(!1),_(!1),Q(!1),ne(!1),se(!1),ie()){e.next=5;break}return console.log("Error with data submission: ",z),e.abrupt("return");case 5:return t={email:d,password:b,session:0,tagName:a},e.next=8,fetch("http://localhost:3000/api/users/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)});case 8:return n=e.sent,e.next=11,n.json();case 11:r=e.sent,console.log(r),j(!0);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){le(Oe(""))}),[]),O?r.a.createElement(u.a,{to:"/login"}):r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0},r.a.createElement(A.a,{className:"p-3 mt-5 text-white lead text-center"},r.a.createElement(I.a,{className:"p-3 text-center, mx-auto pt-5 mt-5 shadow",style:{borderRadius:"15px",backgroundColor:"#191919",opacity:.6,maxWidth:"500px"}},r.a.createElement("h4",{className:"text-white",style:{opacity:.8,marginBottom:"55px"}},"Enter your account information"),r.a.createElement(M.a,{className:"mb-5 mt-3"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Email Address","aria-label":"Email Address","aria-describedby":"basic-addon1",onChange:function(e){return g(e.target.value)},className:X?"form-control-error":"form-control-normal"})),r.a.createElement(M.a,{className:"mb-5 mt-3"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},placeholder:"Desired Tag Name","aria-label":"Desired Tag Name","aria-describedby":"basic-addon1",onChange:function(e){return o(e.target.value)},className:V?"form-control-error":"form-control-normal"})),r.a.createElement(M.a,{className:"mb-5 mt-3"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},type:"password",placeholder:"Desired Password","aria-label":"Desired Password","aria-describedby":"basic-addon1",onChange:function(e){return h(e.target.value)},className:ae||U?"form-control-error":"form-control-normal"})),r.a.createElement(M.a,{className:"mb-5 mt-3"},r.a.createElement(T.a,{style:{marginLeft:"auto",marginRight:"auto",color:"white",opacity:.87,maxWidth:"400px",minHeight:"50px",border:"none",backgroundColor:"#404040"},type:"password",placeholder:"Confirm Password","aria-label":"Confirm Password","aria-describedby":"basic-addon1",onChange:function(e){return x(e.target.value)},className:ce||U?"form-control-error":"form-control-normal"})),r.a.createElement(W.a,{onClick:ue,size:"lg",className:"rounded-pill mb-4 mx-auto",variant:"outline-success",style:{opacity:.8,maxWidth:"200px"},block:!0},"Sign Up"),r.a.createElement(S.a,{fluid:!0,style:{opacity:1.2}},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-left"},r.a.createElement("ul",{style:{listStyleType:"none",marginRight:"auto",marginLeft:"auto",paddingRight:"30px"}},H?r.a.createElement("li",null,r.a.createElement("h6",{className:"border-bottom pb-2 border-danger text-danger font-weight-bold"},"Errors")):"",H?z.map((function(e){return r.a.createElement("li",{key:e,className:"font-italic lead text-danger"},e)})):"")))))))};function Ve(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement($e,null))}var _e=a(79),Ke=a.n(_e),Ge=a(34),Xe=a(252),Qe=null,et={received:{connectSuccess:"connectSuccess",connectError:"connectError",delivered:"delivered",deliveryError:"deliveryError",readReceipt:"readReceipt",typing:"typing",listening:"listening",unlistened:"unlistened",unlistenError:"unlistenError",currentConversationUpdate:"currentConversationUpdate",setCurrentConversationError:"setCurrentConversationError",refreshSuccess:"refreshSuccess",refreshError:"refreshError",messagePinned:"messagePinned",messagePinnedError:"messagePinnedError"},sent:{connect:"connect",disconnect:"disconnect",chatToServer:"chatToServer",readMessage:"readMessage",typing:"typing",listen:"listen",unlisten:"unlisten",setCurrentConversation:"setCurrentConversation",pinMessage:"pinMessage"}};function tt(){var e=Object(m.c)(w),t=Object(m.c)(Q),a=Object(m.c)(X),o=Object(m.b)(),c=Object(m.c)(Pe),s=Object(m.c)(be),l=Object(Xe.a)(["Refresh"]),i=Object(C.a)(l,2),u=i[0];i[1];return Object(n.useEffect)((function(){if(t&&t.id&&e&&"0"!==t.id){if(!u)return void console.log("!token");console.log("Setting up chat socket"),Qe=Ke()("".concat(c,"/chat"),{transportOptions:{polling:{extraHeaders:{credentials:"include"}}},forceNew:!0}),console.log("Setting up chat socket event listeners and listening to rooms"),console.log("Setting up listeners"),Qe.on(et.received.listening,(function(e){console.log("Successfully listening on room with ID ".concat(e.room))})),Qe.on(et.received.connectSuccess,(function(e){console.log("Connected to socket.io server successfully with client id ".concat(e.socketId))})),Qe.on(et.received.connectError,(function(e){console.log("Error: Cannot connect to socket.io server | ".concat(e.message))})),Qe.on(et.received.delivered,(function(a){console.log("Handle message | ".concat(a.message.id," | delivered")),e.id!==a.message.user.id&&a.message.conversation.id!==t.id&&Ge.a.info("Message received from: ".concat(a.message.user.tagName),{position:"top-center",hideProgressBar:!0,pauseOnHover:!0}),a.message.id&&a.message.body&&a.message.createdAt&&(console.log("Adding message to state ... | ".concat(a.message.id)),o($({message:a.message,conversation:a.message.conversation})))})),Qe.on(et.received.deliveryError,(function(){console.log("Error: server error while marking message as delivered")})),Qe.on(et.received.readReceipt,(function(e){console.log("Handle message | ".concat(e.message.id," | read receipt")),e.message.id&&e.message.body&&e.message.createdAt&&(console.log("Adding message read receipt to state ... | ".concat(e.message.id)),o(Y({messageId:e.message.id,convId:e.message.conversation.id})))})),Qe.on(et.received.typing,(function(a){if(console.log("Handle typing event conversation | ".concat(a.conv)),a.conv&&a.user){if(a.user.id===e.id)return;t.id===a.conv&&o(Z(a.typing||!1))}})),Qe.on(et.received.unlistened,(function(e){console.log("Handle unlisten event for conversation | ".concat(e.room))})),Qe.on(et.received.unlistenError,(function(e){console.log("Error: unlisten event error for conversation | ".concat(e.msg))})),Qe.on(et.received.currentConversationUpdate,(function(e){if(console.log("Handle current conversation update event for user | ".concat(e.user.tagName)),e.user){var t=s.filter((function(t){return t.id===e.user.id}))[0];t&&(console.log("Handle set current conversation for friend @".concat(e.user.tagName)),t=e.user)}})),Qe.on(et.received.setCurrentConversationError,(function(e){console.log("Error: set current conversation event error | ".concat(e.msg))})),Qe.on(et.received.refreshSuccess,(function(e){console.log("Handle success refresh socket client ID with server ".concat(e.clientId))})),Qe.on(et.received.refreshError,(function(e){console.log("Handle error for refresh socket client ID with server error ".concat(e.msg))})),Qe.on(et.received.messagePinned,(function(e){console.log("Handle message pinned from server",e),o(G(e.message))})),Qe.on(et.received.messagePinnedError,(function(e){console.log("Handle message pinned error from server",e)})),function(n){if(console.log("Listening to all rooms",a),a&&Array.isArray(a)){var r,o=Object(j.a)(a);try{for(o.s();!(r=o.n()).done;){var c=r.value;c&&c.id&&!1===c.pending&&(console.log("listening to conversation",c),n.emit(et.sent.listen,{room:c.id,user:e.id}))}}catch(s){o.e(s)}finally{o.f()}}else n.emit(et.sent.listen,{room:t.id,user:e.id})}(Qe),Qe.emit("refresh",{userId:e.id,refresh:!0})}else Qe=null;return function(){Qe&&(Object.keys(et.received).map((function(e){return Qe.off(e)})),Qe.close(),Qe=null)}}),[t.id]),r.a.createElement(r.a.Fragment,null)}var at,nt=a(253);function rt(){var e=Object(n.useState)(""),t=Object(C.a)(e,2),a=t[0],o=t[1],c=Object(m.c)(w),s=Object(m.c)(Q),u=Object(n.useRef)(null),d=Object(n.useState)(null),g=Object(C.a)(d,2),p=g[0],f=g[1],b=Ue(),h=Object(n.useState)(!1),v=Object(C.a)(h,2),E=v[0],y=v[1],x=Object(n.useState)(!1),N=Object(C.a)(x,2),O=(N[0],N[1]),j=Object(n.useState)([]),S=Object(C.a)(j,2),H=S[0],B=S[1],D=Object(n.useState)(""),L=Object(C.a)(D,2),z=(L[0],L[1],Object(n.useState)(!1)),q=Object(C.a)(z,2),F=q[0],J=q[1],U=function(){var e=!0;return!1===P.messageBody.test(a)&&(B(["Invalid message body. Must be 1-200 characters."].concat(Object(k.a)(H))),e=!1),e||y(!0),e},Z=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U()){e.next=3;break}return console.log("Error with sending message",H),e.abrupt("return");case 3:console.log("Send message ",a),O(!0),Qe?(Qe.emit("chatToServer",{sender:c.tagName,room:s.id,body:"".concat(a)}),J(!0),u.current.value="",O(!1)):(y(!0),B(["Corrupted chat socket. Please refresh."]),console.log("Corrupted chat socket. Please refresh."),O(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e){Qe&&c&&s?Qe.emit("typing",{sender:c.tagName,room:s.id,typing:e}):console.log("Error: no conversation to send typing to! Please refresh")};return Object(n.useEffect)((function(){Qe&&u&&s&&c&&(u.current.onkeypress=function(){void 0!==at&&clearTimeout(at),at=setTimeout((function(){console.log("typing done"),f(!1),Y(!1)}),1e3)})}),[s.id]),Object(n.useEffect)((function(){s.messages&&Array.isArray(s.messages)&&J(!1)}),[s.messages]),r.a.createElement("div",null,r.a.createElement(A.a,{className:"w-100 text-center",style:{position:"fixed",bottom:40,left:50}},b.width>768?r.a.createElement(I.a,{style:{minWidth:"240px",maxWidth:"240px"}}):"",r.a.createElement(I.a,{className:"mx-auto",style:{paddingRight:"15px",paddingLeft:b.width>768?"2%":"5%"}},E?r.a.createElement("div",{className:"text-danger lead",style:{opacity:.7}},H):"",r.a.createElement(M.a,{className:"pb-3 mx-auto"},r.a.createElement(T.a,{style:{backgroundColor:"#404040",color:"white",border:"none"},placeholder:"Enter a Message","aria-label":"Enter a Message","aria-describedby":"basic-addon2",className:"rounded-pill p-4",ref:u,onKeyPress:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key){e.next=3;break}return e.next=3,Z();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onChange:function(){var e=Object(i.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Qe&&!p&&(f(!0),Y(!0),console.log("Typing started")),o(t.target.value);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),r.a.createElement(M.a.Append,null,F?r.a.createElement(R.a,{className:"m-2 p-2",size:"lg",variant:"info",animation:"border"}):r.a.createElement(W.a,{onClick:Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z();case 2:case"end":return e.stop()}}),e)}))),className:"ml-1 rounded-pill text-right",variant:"outline-secondary",style:{border:"none",backgroundColor:"#404040",color:"#02a5ff"},id:"basic-addon2"},r.a.createElement(nt.a,{style:{color:"white",opacity:"0.87"}}))))),r.a.createElement(I.a,{xs:"1"})))}var ot=a(269),ct=(a(202),a(54)),st=a.n(ct),lt=(a(127),a(55)),it=a.n(lt),ut=a(138),mt=a.n(ut),dt=a(256),gt=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function pt(e){var t=e.sentByMe,a=e.deleteMessage,n=e.pinMessage;return r.a.createElement(ot.a,{className:t?"msg-dropdown message-dropdown-sender light-hover":"msg-dropdown message-dropdown-received light-hover",drop:t?"left":"right"},r.a.createElement(ot.a.Toggle,{as:W.a,variant:"dark",className:"message-menu-button"},r.a.createElement(st.a,null)),r.a.createElement(ot.a.Menu,{style:{backgroundColor:"#222222",minWidth:"80px"},className:"my-dropdown-message shadow text-white text-center"},r.a.createElement(ot.a.Item,{className:"text-white shadow dropdown-item-message",as:"button",onClick:function(e){e.preventDefault(),e.stopPropagation(),n&&n()}},"Pin\xa0",r.a.createElement(mt.a,null)),t?r.a.createElement(ot.a.Item,{className:"text-white shadow dropdown-item-message",as:"button",onClick:function(e){e.preventDefault(),e.stopPropagation(),a&&a()}},"Delete\xa0",r.a.createElement(it.a,null)):""))}var ft=function(e){var t=new Date(Date.parse(e));return{hour:t.getHours(),min:t.getMinutes(),pm:t.getHours()>12,day:t.getTime()<Date.now()-864e5?gt[t.getDay()]:"",minsAgo:(Date.now()-t)/1e3/60}};function bt(e){var t=e.message,a=e.isBottom,o=Object(n.useState)(ft(t.createdAt)),c=Object(C.a)(o,2),s=c[0],l=(c[1],Object(n.useState)(!1)),i=Object(C.a)(l,2),u=i[0],m=i[1],d=Ue();return r.a.createElement(S.a,{key:Math.random(),className:"mt-2 mb-2",style:{marginTop:"auto",minHeight:"80px"},fluid:!0},r.a.createElement(A.a,{onMouseLeave:function(){return m(!1)}},r.a.createElement(I.a,{xs:"12",className:"text-right pr-2"},r.a.createElement(S.a,{fluid:!0,className:d.width>768?"pr-5":""},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"text-right message-me-column",onMouseEnter:function(){m(!0)}},r.a.createElement(dt.a,{className:"p-2 m-1 text-white text-left message-from-me message-column",style:{borderRadius:"18px 18px 5px 18px",display:"block",backgroundColor:"#3266a8",wordWrap:"break-word"}},t.body)),r.a.createElement(I.a,{xs:"1",style:{maxWidth:"20px"},className:"text-right"},u?r.a.createElement(pt,{sentByMe:!0,pinMessage:function(){alert("message pinned")},deleteMessage:function(){alert("message del")}}):""))))),u||a?r.a.createElement(A.a,{style:{opacity:.8}},r.a.createElement(I.a,{xs:"12",className:"text-right pr-3"},r.a.createElement(S.a,{fluid:!0,className:d.width>768?"pr-5":""},r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:d.width>768?"8":"6",className:"text-center"}),r.a.createElement(I.a,{className:"text-right"},r.a.createElement("span",{style:{opacity:.7,fontSize:"10pt"},className:"font-italic text-left text-white text-small"},"".concat(!0===t.read?"Read - ":" Delivered - "),s.minsAgo<60?"".concat(s.minsAgo.toFixed()>0?s.minsAgo.toFixed()+" mins ago":"Now"):"".concat(s.day?s.day+", ":"Today, ").concat(s.hour,":").concat(s.min<10?"0"+s.min:s.min).concat(s.pm?"PM":"AM"))))))):"")}function ht(e){var t=e.message,a=Object(n.useState)(ft(t.createdAt)),o=Object(C.a)(a,2),c=o[0],s=(o[1],Object(n.useState)(!1)),l=Object(C.a)(s,2),i=l[0],u=l[1];Ue(),Object(m.b)();return r.a.createElement(S.a,{key:Math.random(),className:"mt-2 mb-2 p-1",style:{marginTop:"auto",minHeight:"80px"},fluid:!0},r.a.createElement(A.a,{onMouseLeave:function(){return u(!1)}},r.a.createElement(I.a,{xs:"12",className:"text-left"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:"1",style:{maxWidth:"20px"},className:"text-left"},i?r.a.createElement(pt,{pinMessage:function(){alert("message pinned")},sentByMe:!1}):""),r.a.createElement(I.a,{className:"text-left message-me-column",onMouseEnter:function(){u(!0)}},r.a.createElement(dt.a,{className:"p-2 m-1 text-white text-left message-from-other message-column",style:{borderRadius:"5px 18px 18px 18px",display:"block",backgroundColor:"#1E3D64",wordWrap:"break-word"}},t.body)))))),r.a.createElement(A.a,{style:{opacity:.8,maxHeight:"10px"}},r.a.createElement(I.a,{xs:"9",className:"text-left pl-4 pt-2",style:{opacity:.7}},r.a.createElement("span",{className:"font-italic text-left text-white"},r.a.createElement("span",{style:{opacity:.7,fontSize:"10pt"},className:"text-white text-small"},"@".concat(t.user.tagName," ")),c.minsAgo<60?"- ".concat(c.minsAgo.toFixed()>0?c.minsAgo.toFixed()+" mins ago":"Now"):"- ".concat(c.day?c.day+", ":"Today, ").concat(c.hour,":").concat(c.min<10?"0"+c.min:c.min," ").concat(c.pm?"PM":"AM"))),r.a.createElement(I.a,{xs:"3",className:"text-center"})))}function vt(e){var t=e.message,a=e.isBottom,n=Object(m.c)(w);return t.user.id===n.id?r.a.createElement(bt,{message:t,isBottom:a}):r.a.createElement(ht,{message:t})}function Et(e){var t=e.defaultView,a=Object(n.useState)(!1),o=Object(C.a)(a,2),c=o[0],s=o[1],u=Object(n.useState)([]),d=Object(C.a)(u,2),g=d[0],p=d[1],f=Object(n.useState)(!1),b=Object(C.a)(f,2),h=b[0],v=b[1],E=Object(m.c)(Q),y=(Object(m.c)(w),Object(m.c)(Pe),Object(m.c)(Re)),x=Ue(),N=Object(n.useRef)(),O=Object(m.b)();E||(E={});var j=x.height-x.height/8;isNaN(j)&&(j=window.innerHeight-window.innerHeight/8);var k=function(){var e=Object(i.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Requesting more messages for conversation "+E.id),e.next=3,fetch("http://localhost:3000/api/conversation/messages/range/?"+new URLSearchParams({id:E.id,beforeDate:E.messages[0].createdAt,number:25}),{headers:{Authorization:"Bearer ".concat(y)}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,Array.isArray(a)&&(console.log(a),O(z({messages:a,conversationId:E.id})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(i.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N.current){e.next=8;break}if(!((null===(t=N.current)||void 0===t?void 0:t.scrollTop)<=100&&!0!==h)){e.next=8;break}if(!((null===(a=E)||void 0===a||null===(n=a.messages)||void 0===n?void 0:n.length)<(null===(r=E)||void 0===r?void 0:r.numberOfMessages))){e.next=8;break}if(!1!==h){e.next=8;break}return v(!0),e.next=7,k();case 7:v(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){E&&E.messages&&(O(q()),p(E.messages)),N&&N.current&&!1===h&&(N.current.scrollTop=N.current.scrollHeight)}),[E.messages]),Object(n.useEffect)((function(){N&&N.current&&!1===h&&(N.current.scrollTop=N.current.scrollHeight)}),[g]),Object(n.useEffect)((function(){E&&void 0!==E.typing&&(console.log("setting is typing"),s(E.typing))}),[E.typing]),t?r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:"3"}),r.a.createElement(I.a,{className:"mt-5 lead",style:{opacity:.87,color:"#404040"}},r.a.createElement("span",{style:{marginTop:"auto"}},"Click a conversation")),r.a.createElement(I.a,{xs:"3"})):r.a.createElement(A.a,{className:"w-100",style:{marginTop:75}},x.width>768?r.a.createElement(I.a,{style:{minWidth:"240px",maxWidth:"240px"}}):"",r.a.createElement(I.a,{style:{paddingLeft:x.width>768?"0%":"3%"}},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{style:{height:j}},r.a.createElement(I.a,{ref:N,onScroll:M,className:"ul",style:{bottom:150,paddingBottom:50,paddingTop:100,height:j-10,overflowY:"scroll",position:"fixed",paddingLeft:"20px",paddingRight:"85px",width:x.width>768?x.width-240:x.width,maxWidth:x.width>768?x.width-240:x.width}},g.map((function(e,t){return r.a.createElement(A.a,{key:e.id+"row",className:"messages-list-item"},r.a.createElement(vt,{key:e.id,message:e,isBottom:t>=g.length-1}))})))),c||h?r.a.createElement(A.a,null,r.a.createElement(S.a,{key:Math.random(),style:{position:"fixed",bottom:120},className:"typing-list-item-container",fluid:!0},r.a.createElement(A.a,{className:"mt-1 mb-1"},r.a.createElement(I.a,{xs:"1"}),r.a.createElement(I.a,{xs:"9",className:"text-left"},r.a.createElement("div",{className:"p-2 m-1 text-white typing-list-item",style:{borderRadius:"18px",display:"inline-block",whiteSpace:"nowrap",backgroundColor:"#1E3D64"}},h?r.a.createElement("span",null,r.a.createElement("span",{className:"font-italic text-muted",style:{fontSize:"18pt"}},"Loading Messages"),"\xa0\xa0",r.a.createElement(R.a,{animation:"grow",size:"lg"})):"",c?r.a.createElement("span",null,r.a.createElement(R.a,{animation:"grow",size:"lg"}),r.a.createElement(R.a,{animation:"grow",size:"lg"}),r.a.createElement(R.a,{animation:"grow",size:"lg"})):"")),r.a.createElement(I.a,{xs:"3",className:"text-center"})),r.a.createElement(A.a,{className:"",style:{marginTop:-10}},r.a.createElement(I.a,{xs:"9",className:"text-left pl-4"},r.a.createElement("span",{className:"font-italic text-left text-muted"})),r.a.createElement(I.a,{xs:"3",className:"text-center"})))):"")))}function yt(){var e=Ue(),t=Object(m.c)(ee);return t?r.a.createElement(S.a,{fluid:!0}):r.a.createElement(S.a,{className:"pl-3",style:{minHeight:e.height,height:e.height},fluid:!0},r.a.createElement(A.a,{style:{minHeight:e.height-150,height:e.height-150,paddingBottom:"auto"}},r.a.createElement(Et,{defaultView:t,style:{minHeight:e.height,height:e.height}})),r.a.createElement(A.a,{style:{minHeight:20}}),r.a.createElement(A.a,{className:"pb-2"},r.a.createElement(rt,null)),r.a.createElement(A.a,{style:{minHeight:20}}))}var xt=a(273),Nt=a(259),wt=a(257),Ot=a(260),jt=a(275),kt=a(261),Ct=a(272),St=Object(wt.a)((function(e){return{animate_in:{width:0,visibility:"invisible",flexShrink:0,animationName:"fadeout",animationDuration:"1s"},animate_out:{width:"200px",flexShrink:0,animationName:"fadeout",animationDuration:"1s"},"@keyframes fadeout":{"0%":{width:"25%"},"100%":{width:0,display:"none",opacity:1}},"@keyframes fadein":{"0%":{width:0,opacity:0},"100%":{width:"25%",opacity:1}},narrowPaper:{minWidth:"240px",maxWidth:"240px",backgroundColor:"#222222",opacity:.8},hidePaper:{backgroundColor:"#222222",width:"0%"},fullDrawerPaper:{width:"100%",backgroundColor:"#222222"},drawerContainer:{backgroundColor:"#222222",color:"white",paddingRight:"20px",overflowX:"hide"}}}));function At(e){var t=e.conversation,a=e.selectConversation,n=e.deleteConversation,o=e.selected,c=e.minWidth,s=e.buttonMargin;return r.a.createElement(jt.a,{onClick:function(){return a(t)},key:t.id,className:o?"sidebar-list-item light-selected":"sidebar-list-item light-hover",style:{backgroundColor:"#222222"}},r.a.createElement(S.a,{fluid:!0,style:{backgroundColor:"#222222"},className:o?"light-selected":"light-hover"},r.a.createElement(A.a,{style:{backgroundColor:"#222222"},className:o?"light-selected":"light-hover"},r.a.createElement(I.a,{className:o?"conv-info light-selected":"conv-info light-hover",style:{minWidth:c}},r.a.createElement(S.a,{fluid:!0,className:o?"light-selected":"light-hover"},r.a.createElement(A.a,{className:"font-italic text-primary",style:{fontSize:"11pt",minWidth:c}},t.conversationName),r.a.createElement(A.a,{className:"w-100",style:{fontSize:"9pt"}},r.a.createElement("div",{className:"ml-1 d-block text-truncate"},t.messages[0].body)),r.a.createElement(A.a,{className:"lead w-100 mt-1",style:{fontSize:"8pt"}},r.a.createElement("div",{className:"ml-1 d-block font-italic"},new Date(Date.parse(t.createdAt)).toLocaleString("en-US"))))),r.a.createElement(I.a,{className:o?"hide-conv-info text-right light-selected":"hide-conv-info text-right light-hover",style:{backgroundColor:"#222222",marginLeft:s}},r.a.createElement(S.a,{className:o?"light-selected":"light-hover",style:{backgroundColor:"#222222"},fluid:!0},r.a.createElement(ot.a,{className:o?"light-selected":"light-hover",style:{backgroundColor:"#222222",marginLeft:"-20px"}},r.a.createElement(ot.a.Toggle,{className:"dropdown-toggle-conv-info text-white",style:{border:" none",backgroundColor:"#222222"},as:W.a,variant:"dark",id:"dropdown-custom-components"},r.a.createElement(st.a,null)),r.a.createElement(ot.a.Menu,{style:{backgroundColor:"#222222"},className:"my-dropdown shadow text-white text-center"},r.a.createElement(ot.a.Item,{className:"text-white shadow conv-dropdown p-2",as:"button",onClick:function(e){e.preventDefault(),e.stopPropagation(),n&&n(t.id)}},"Delete\xa0",r.a.createElement(it.a,null)))))))))}function It(){var e=Ue(),t=St(),a=e.width<768,o=Object(m.c)(X),c=Object(n.useState)([]),s=Object(C.a)(c,2),l=s[0],i=s[1],d=Object(m.b)(),g=Object(m.c)(te),p=Object(m.c)(w),f=Object(n.useState)(""),b=Object(C.a)(f,2),h=b[0],v=b[1],E=Object(u.g)(),y=Object(u.h)(),x=Object(m.c)(Q),N=(Object(m.c)(je),Object(n.useState)(!1)),O=Object(C.a)(N,2),j=O[0],k=O[1],A=Object(n.useState)(!1),I=Object(C.a)(A,2),R=I[0],H=I[1],B=Object(n.useState)(!1),D=Object(C.a)(B,2),L=D[0],z=D[1],q=function(t){if(!t.pending)return console.log("Setting current conversation...",t),console.log(E,y),z(!1),"/home"!==y.pathname&&E.push("/home"),x.conversationName===t.conversationName?(d(U(!1)),void d(F(!1))):(t&&""!==t.conversationName&&e.width>768&&x.conversationName!==t.conversationName&&d(Oe(t.conversationName)),t&&""!==t.conversationName&&e.width<=768&&x.conversationName!==t.conversationName&&d(Oe("")),d(U(!1)),d(V({conversation:t})),Qe&&Qe.emit("setCurrentConversation",{user:p,conversationId:t.id},(function(){return console.log("Emitted setCurrentConversation successfully")})),void d(F(!1)));console.log("Conversation is pending invite accept",t)},J=function(e){console.log("Deleting Conversation "+e),x&&x.id===e&&(d(F(!0)),d(Oe("")),z(!0)),d(K({id:e}))};Array.isArray(o)&&o.length>1&&(o=o.filter((function(e,t,a){return a.indexOf(e)===t})));var Z=function(e,t,a){return(e||t)&&a?"450px":e&&!a?"0px":"200px"}(a,L,g),Y=function(e,t){return e&&t?"150px":e&&!t?"0px":"-5px"}(a,g);return r.a.createElement(xt.a,{variant:"permanent",classes:{paper:(a||L)&&g?t.fullDrawerPaper:a&&!g?t.hidePaper:t.narrowPaper}},r.a.createElement(Nt.a,null),r.a.createElement("div",{className:t.drawerContainer},r.a.createElement(Ot.a,{style:{opacity:.8}},r.a.createElement(jt.a,{style:{maxWidth:"500px",maxHeight:"120px"},className:"text-small text-center mx-auto",selected:!1,key:"sidebar-search"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(M.a,{className:"mx-auto"},r.a.createElement(T.a,{style:{textAlign:"center"},placeholder:"Search","aria-label":"Search","aria-describedby":"basic-addon1",onChange:function(e){return v(e.target.value)},className:"mx-auto lead form-control-custom",autoComplete:"new-password"}),r.a.createElement(M.a.Append,{style:{maxWidth:"30px"}},r.a.createElement(Ct.a,{title:"Search Chat Names"},r.a.createElement(W.a,{variant:"dark",onClick:function(){return function(){if(H(!1),h.length>4){if(!1===P.conversationName.test(h))return console.log("Input failed for searching a conversation name"),void H(!0);var e=o.filter((function(e){return e.conversationName.includes(h)||h.includes(e.conversationName)}));e.length>0?(i(e),k(!0)):H(!0)}else H(!0)}()},className:"custom-sidebar-search-button",style:{backgroundColor:"#404040",border:"none"}},r.a.createElement(kt.a,{className:R?"error-icon":"",style:{color:"#EEEEEE"}}))),j?r.a.createElement(Ct.a,{title:"Exit Search"},r.a.createElement(W.a,{variant:"dark",onClick:function(){return k(!1)},className:"custom-sidebar-search-button",style:{backgroundColor:"#404040",border:"none"}},"X")):"")))),j?l.map((function(e){return!0===e.pending?"":r.a.createElement(At,{conversation:e,selectConversation:q,deleteConversation:J,buttonMargin:Y,selected:x.conversationName===e.conversationName,minWidth:Z,key:e.id})})):o.map((function(e){return!0===e.pending?"":r.a.createElement(At,{conversation:e,selectConversation:q,deleteConversation:J,buttonMargin:Y,selected:x.conversationName===e.conversationName,minWidth:Z,key:e.id})})))))}function Rt(){return Object(m.c)(te)?r.a.createElement(It,null):r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(tt,null),r.a.createElement(It,null),r.a.createElement(S.a,{fluid:!0,className:"w-100 h-100"},r.a.createElement(yt,{className:"w-100 h-100"})))}a(204);var Mt=a(87),Tt=a.n(Mt),Wt=a(140),Ht=a.n(Wt),Pt=null;var Bt=a(271);a(205);function Dt(e){var t=e.handleSetConvPassword,a=Object(n.useState)(""),o=Object(C.a)(a,2),c=o[0],s=o[1],l=Object(n.useState)(!1),i=Object(C.a)(l,2),u=i[0],m=i[1],d=Object(n.useRef)([]),g=Object(n.useRef)(null),p=(Ue(),function(){m(!1),d.current=[],function(){var e=!0;return!1===P.password.test(c)&&(e=!1,d.current.push("Invalid Password. Must be 8-32 characters")),e||m(!0),e}()?t(c):console.log("Error with password",d)});return Object(n.useEffect)((function(){null!=g.current&&g.current.focus()}),[g]),r.a.createElement("div",{className:"modal-password-set"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"pt-2 pb-3"},r.a.createElement(I.a,{className:"mx-auto text-center pt-3"},r.a.createElement(Tt.a,{style:{width:42,height:42}}))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Set Password"))),r.a.createElement(A.a,{className:"pt-2 pb-2"},r.a.createElement(I.a,{style:{borderBottom:"1px solid #303030"},className:"mx-auto text-center",xs:"10"},r.a.createElement(M.a,{className:"mb-3 mt-2 mx-auto"},r.a.createElement(T.a,{style:{fontSize:"18pt",textAlign:"center",color:"white",minHeight:"50px",border:"none",minWidth:"80%",backgroundColor:"#252525"},placeholder:"Enter Password",type:"password","aria-label":"Enter Password","aria-describedby":"basic-addon1",onChange:function(e){s(e.target.value)},className:u?"mx-auto lead form-control-red":"mx-auto lead form-control-custom",ref:g,autoComplete:"new-password",name:"setPWNewConv"})))),r.a.createElement(A.a,{className:"pt-3 mt-2"},r.a.createElement(I.a,{className:"mx-auto text-center",xs:"10"},r.a.createElement(W.a,{onClick:function(){return p()},variant:"outline-success",size:"lg",style:{backgroundColor:"#252525",marginLeft:"auto",marginRight:"auto"},className:"p-3 rounded-pill"},"Set Password")))))}function Lt(e){var t=e.setConversationName,a=e.errorName,o=Object(n.useRef)(null);return Object(n.useEffect)((function(){o.current&&o.current.focus()}),[o.current]),r.a.createElement(S.a,{fluid:!0,style:{maxWidth:"500px"}},r.a.createElement(M.a,{className:"mt-2 mx-auto"},r.a.createElement(T.a,{style:{textAlign:"center",fontSize:"22pt",color:"#d9534f",minHeight:"50px",border:"none",backgroundColor:"#191919"},placeholder:"Enter Chat Name","aria-label":"Enter Chat Name","aria-describedby":"basic-addon1",onChange:function(e){return t(e.target.value)},className:a?"mx-auto lead form-control-red":"mx-auto lead form-control-custom",autoComplete:"new-password",name:"setNameNewConv",ref:o})))}function zt(e){var t=e.errorSearch,a=e.selectedFriends,o=e.setSelectedFriends,c=e.setErrorSearch,s=e.setError,l=e.errorMsgs,i=e.setButtonsDisabled,u=Object(m.c)(be),d=Object(n.useState)(""),g=Object(C.a)(d,2),p=g[0],f=g[1],b=Object(n.useState)([]),h=Object(C.a)(b,2),v=h[0],E=h[1];Object(n.useEffect)((function(){E(JSON.parse(JSON.stringify(u)))}),[u]),Object(n.useEffect)((function(){a.length<1?(i(!0),console.log("Buttons disabled")):(i(!1),console.log("Buttons enabled"))}),[a]);var y=function(e,t){var n=JSON.parse(JSON.stringify(a));return t?a.length>0?a.filter((function(t){return t===e})).length>1?void 0:(n.push(e),void o(n)):void o([e]):a.length>0?a.filter((function(t){return t===e})).length>0?void o(a.filter((function(t){return t!==e}))):void 0:void o([])};return r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"pb-3"},r.a.createElement(I.a,{xs:"2"}),r.a.createElement(I.a,{xs:"8",className:"border-bottom border-dark",style:{maxWidth:"450px"}},r.a.createElement(M.a,{className:"mb-3 mt-2 mx-auto"},r.a.createElement(T.a,{style:{textAlign:"center",fontSize:"18pt",color:"#EEEEEE",opacity:.8,minHeight:"50px",border:"none",backgroundColor:"#191919"},placeholder:"Search friends","aria-label":"Search friends","aria-describedby":"basic-addon1",onChange:function(e){return f(e.target.value)},className:t?"mx-auto lead form-control-red font-italic":"mx-auto lead form-control-custom font-italic",value:p,autoComplete:"new-password"}))),r.a.createElement(I.a,{xs:"2",style:{maxWidth:"50px"}},r.a.createElement(W.a,{onClick:function(){!function(){if(c(!1),s(!1),l.current=[],!1===P.tagName.test(p))return c(!0),s(!0),f(""),void l.current.push("Invalid tagname for search");E(v.filter((function(e){return e.tagName.includes(p)||p.includes(e.tagName)})))}()},variant:"dark",style:{marginTop:"10px",display:"block",backgroundColor:"#191919",border:"none"}},r.a.createElement("span",{className:"text-primary text-lg-center"},r.a.createElement(kt.a,{style:{color:"#BBBBBB",height:35,width:35,cursor:"pointer"}}))))),r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"mx-auto"},r.a.createElement("span",{className:"font-italic text-small",style:{color:"dodgerblue"}},"Select Friends For Chat"))),r.a.createElement(A.a,null,r.a.createElement(I.a,{xs:"2"}),r.a.createElement(I.a,{xs:"8",style:{maxWidth:"500px"}},r.a.createElement(S.a,{fluid:!0,style:{minHeight:"225px",overflowY:"scroll",backgroundColor:"#191919"}},v&&v.length>0?v.map((function(e){return r.a.createElement(qt,{key:e.id,id:e.id,tagName:e.tagName,onCheck:y})})):r.a.createElement(A.a,{className:"mb-4"},r.a.createElement(I.a,{className:"mx-auto text-center text-muted font-italic pt-5"},"No friends available! Add a friend!")))),r.a.createElement(I.a,{xs:"2"})))}function qt(e){e.id;var t=e.tagName,a=e.onCheck,o=Object(n.useState)(!1),c=Object(C.a)(o,2),s=c[0],l=c[1];Object(n.useEffect)((function(){a(t,s)}),[s]);return r.a.createElement(A.a,{className:"p-2"},r.a.createElement(I.a,{className:"text-center justify-content-around"},r.a.createElement(W.a,{onClick:function(){l(!s)},className:s?"p-3 m-2 account-button-checked":"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"@",t)))}function Ft(){var e=Object(m.c)(X),t=Object(m.c)(w),a=Object(n.useState)(""),o=Object(C.a)(a,2),c=o[0],s=o[1],l=Ue(),i=Object(n.useState)(!1),u=Object(C.a)(i,2),d=u[0],g=u[1],p=Object(n.useState)([]),f=Object(C.a)(p,2),b=f[0],h=f[1],v=Object(n.useState)(!1),E=Object(C.a)(v,2),y=E[0],x=E[1],N=Object(n.useState)(!1),O=Object(C.a)(N,2),k=O[0],R=O[1],M=Object(n.useState)(!0),T=Object(C.a)(M,2),H=T[0],B=T[1],D=Object(n.useRef)(null),L=Object(n.useRef)([]),z=Object(n.useState)(!1),q=Object(C.a)(z,2),F=q[0],J=q[1],U=Object(n.useState)(""),Z=Object(C.a)(U,2),Y=(Z[0],Z[1]),$=Object(n.useState)(""),V=Object(C.a)($,2),_=(V[0],V[1],Object(m.b)()),K=Object(m.c)(be),G=l.width>768,Q=function(){if(L.current=[],g(!1),x(!1),R(!1),function(){var a=!0;if(!1===P.conversationName.test(c)&&(L.current.push("Invalid Conversation Name"),x(!0),a=!1),1===e.filter((function(e){return e.conversationName===c})).length&&(L.current.push("Conversation with that name already exists"),x(!0),a=!1),!0===a){var n,r=Object(j.a)(b);try{var o=function(){var e=n.value;if(0===K.filter((function(t){return t.tagName===e})).length)return L.current.push("Friend with tagname ".concat(friend," isn't in your friends list")),a=!1,"break"};for(r.s();!(n=r.n()).done;){if("break"===o())break}}catch(m){r.e(m)}finally{r.f()}var s,l=Object(j.a)(e);try{for(l.s();!(s=l.n()).done;){var i=s.value,u=i.users.filter((function(e){return e.id!==t.id})).map((function(e){return e.tagName}));if(u&&u.length>0&&JSON.stringify(u)===JSON.stringify(b)){L.current.push('Chat named "'.concat(i.conversationName,'" with selected friends exists')),a=!1;break}}}catch(m){l.e(m)}finally{l.f()}}return a||g(!0),a}()){console.log("Creating new conversation and sending invites to users from friends list. Users: ",b);var a,n=Object(j.a)(b);try{var r=function(){var e=a.value;Pt&&Pt.emit("sendInvite",{sender:t,tagName:e,conversationName:c},(function(){console.log("Successfully emitted send invite to user with tagname",e)}))};for(n.s();!(a=n.n()).done;)r()}catch(o){n.e(o)}finally{n.f()}toast.info("Successfully sent out conversation invites!",{position:"top-center",hideProgressBar:!0,pauseOnHover:!0})}else console.log("Errors: ",L)};return Object(n.useEffect)((function(){D&&D.current&&D.current.focus()}),[]),Object(n.useEffect)((function(){l.width,_(Oe(r.a.createElement("span",null,"New Conversation")))}),[l.width]),r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0,style:{margin:"auto",paddingLeft:G?"240px":"20px"}},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center",style:{opacity:.8,borderRadius:"10px",backgroundColor:"#191919",maxWidth:"600px"}},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"mt-2 mb-2"},r.a.createElement(Lt,{setConversationName:s,errorName:y})),r.a.createElement(A.a,{className:"mt-2 mb-2 pb-2"},r.a.createElement(zt,{errorSearch:k,selectedFriends:b,setSelectedFriends:h,setErrorSearch:R,setError:g,errorMsgs:L,setButtonsDisabled:B})),r.a.createElement(A.a,{className:"pt-3"},r.a.createElement(Bt.a,{open:F,onClose:function(){return J(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(Dt,{handleSetConvPassword:function(e){Y(e)}})),r.a.createElement(I.a,{className:"mx-auto"},r.a.createElement(W.a,{onClick:function(){return J(!0)},disabled:H,className:"rounded-pill p-2 mx-auto",variant:"outline-info",size:"lg",style:{opacity:H?.5:1,maxWidth:"200px",marginTop:"20px"}},"Set\xa0Password\xa0",r.a.createElement(Tt.a,{style:{width:25,height:25}})))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto"},r.a.createElement(W.a,{onClick:function(){return Q()},disabled:H,className:"rounded-pill p-2 mx-auto",variant:"outline-success",size:"lg",style:{opacity:H?.5:1,maxWidth:"200px",marginTop:"20px"}},"Sent Chat Invites ",r.a.createElement(Ht.a,{style:{width:25,height:25}})))),r.a.createElement(A.a,{className:"pt-2 mt-2"},r.a.createElement(I.a,null,r.a.createElement("ul",null,d?L.current.map((function(e){return r.a.createElement("li",{key:e,className:"text-danger text-small"},e)})):"")))))))}function Jt(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(It,null),r.a.createElement(S.a,{fluid:!0,className:"w-100 h-100"},r.a.createElement(Ft,null)))}var Ut=a(107),Zt=a.n(Ut),Yt=a(145),$t=a.n(Yt),Vt=a(142),_t=a.n(Vt),Kt=a(141),Gt=a.n(Kt),Xt=a(143),Qt=a.n(Xt),ea=a(144),ta=a.n(ea);a(206),a(64);function aa(){return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",{className:"text-danger"},"About Project Zed"))),r.a.createElement(A.a,{className:"pt-2 pb-2"},r.a.createElement(I.a,{className:"mx-auto text-center text-white",xs:"12"},r.a.createElement(dt.a,null,"Blah blah blah this is my open source version of realtime e2e encrypted messaging. Email me at jakestevens081@gmail.com for questions. www.github.com/jakesteve28")))))}function na(e){e.logoutAccount;var t=Object(n.useState)(""),a=Object(C.a)(t,2),o=a[0],c=a[1],s=Object(n.useState)(!1),l=Object(C.a)(s,2),i=l[0],u=l[1],m=Object(n.useRef)([]),d=function(){m.current=[],u(!1),function(){var e=!0;!1===P.tagName.test(o)&&(console.log("Error: new tagname failed regex test"),m.current.push("Error: new tagname failed regex test"),e=!1),e||u(!0)}()};return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h3",null,"Change Tagname"))),r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("span",{className:"text-warning"},"Note that this is permanent, will require a logout, and will automatically update your friends' lists."))),r.a.createElement(A.a,{className:"pt-2 pb-2 mb-1"},r.a.createElement(I.a,{className:"mx-auto text-center text-white",xs:"12"},r.a.createElement(M.a,null,r.a.createElement(T.a,{style:{marginLeft:"auto",maxWidth:"300px",marginRight:"auto",color:"white",opacity:.87,minWidth:"200px",minHeight:"50px",backgroundColor:"#212121",border:"none"},placeholder:"Enter desired Tagname","aria-label":"Enter desired Tagname","aria-describedby":"basic-addon1",className:i?"change-tagname-input error-placeholder":"change-tagname-input",onChange:function(e){c(e.target.value)}})))),r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("span",{className:"text-muted font-italic"},"Must be 8-24 letters, numbers, dashes or underscores"))),r.a.createElement(A.a,{className:"pt-2 mt-2"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement(W.a,{onClick:function(){return d()},variant:"outline-success",size:"lg",style:{padding:"10px"}},"Submit")))))}var ra=a(262);function oa(e){var t=e.logoutAccount;return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Delete Account"))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement(dt.a,{className:"text-warning"},"Note that this action is PERMANENT. Once clicked, your encrypted account info, all encrypted messages, encrypted chats, and associated encrypted metadata will be killed. Your email's username and email will be flagged and not allowed for re-application. If more than three deletes come from your IP/user agent, your IP will be flagged and not allowed for re-application. If your account is flagged, reported, or disabled for suspicious content, encrypted data will be warehoused as applicable by the law."))),r.a.createElement(A.a,{className:"pt-2 mt-2"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement(W.a,{onClick:function(){return alert("You're going to be logged out now..."),void t()},variant:"outline-danger",size:"lg"},"DELETE ACCOUNT ",r.a.createElement(ra.a,null))))))}function ca(){return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Privacy and Security Disclaimers"))),r.a.createElement(A.a,{className:"pt-2 pb-2"},r.a.createElement(I.a,{className:"mx-auto text-center text-white",xs:"12"},r.a.createElement(dt.a,null,"Blah blah blah TODO")))))}function sa(e){var t=e.logoutAccount;return r.a.createElement("div",{className:"settings-modal"},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement("h5",null,"Reset Password"))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto text-center pt-1 pb-3"},r.a.createElement(dt.a,{className:"text-warning"},"Note that this action will log and lock you out, and then send a reset link to your account's listed email."))),r.a.createElement(A.a,{className:"pt-2 mt-5"},r.a.createElement(I.a,{className:"text-center"},r.a.createElement(W.a,{onClick:function(){return alert("You're going to be logged out now..."),void t()},variant:"outline-danger",size:"lg"},"Reset Password")))))}function la(){var e=Object(m.c)(w),t=Object(m.b)(),a=Ue(),o=Object(n.useState)(!1),c=Object(C.a)(o,2),s=c[0],l=(c[1],Object(n.useState)(!1)),i=Object(C.a)(l,2),u=i[0],d=(i[1],Object(n.useState)([])),g=Object(C.a)(d,2),p=g[0],f=(g[1],Object(n.useState)("")),b=Object(C.a)(f,2),v=b[0],E=(b[1],Object(n.useState)("")),y=Object(C.a)(E,2),x=(y[0],y[1],Object(n.useRef)(null),a.width>768),O=Object(n.useState)(!1),j=Object(C.a)(O,2),k=j[0],R=j[1],M=Object(n.useState)(!1),T=Object(C.a)(M,2),H=T[0],P=T[1],B=Object(n.useState)(!1),D=Object(C.a)(B,2),L=D[0],z=D[1],q=Object(n.useState)(!1),F=Object(C.a)(q,2),U=F[0],Z=F[1],Y=Object(n.useState)(!1),$=Object(C.a)(Y,2),V=$[0],_=$[1],K=function(){t(N()),t(h()),t(Ie()),t(J()),t(oe()),t(ge()),console.log("Successfully logged out")};return Object(n.useEffect)((function(){a.width>768?t(Oe(r.a.createElement("span",null,r.a.createElement(Zt.a,null),"\xa0Account Settings | @",e.tagName))):t(Oe(r.a.createElement("span",null,r.a.createElement(Zt.a,null)," ",r.a.createElement("span",{className:"text-primary"},"@",e.tagName))))}),[a.width]),r.a.createElement(S.a,{className:"h-100 w-100",fluid:!0,style:{margin:"auto",paddingLeft:x?"240px":"0px"}},r.a.createElement(A.a,{className:"pt-3"},r.a.createElement(Bt.a,{open:k,onClose:function(){return R(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(aa,null)),r.a.createElement(Bt.a,{open:V,onClose:function(){return _(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(na,{logoutAccount:K})),r.a.createElement(Bt.a,{open:H,onClose:function(){return P(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(oa,{logoutAccount:K})),r.a.createElement(Bt.a,{open:L,onClose:function(){return z(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(ca,null)),r.a.createElement(Bt.a,{open:U,onClose:function(){return Z(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description"},r.a.createElement(sa,{logoutAccount:K}))),r.a.createElement(A.a,null,r.a.createElement(I.a,{className:"mx-auto p-5",xs:"8",style:{opacity:.8,borderRadius:"10px",backgroundColor:"#191919",maxWidth:"500px"}},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"mb-2"},r.a.createElement(I.a,{className:"pb-4 text-center lead mx-auto border-bottom border-dark",xs:"8",style:{opacity:.87,color:"#EEEEEE",fontSize:"16pt"}},"Your Account")),r.a.createElement(A.a,{className:"mb-2 mt-1"},r.a.createElement(I.a,{className:"p-2 text-center",style:{color:"#EEEEEE",opacity:.9,fontSize:"14pt"}},r.a.createElement("span",{className:"text-muted font-italic"},"Email:"),"\xa0\xa0\xa0",e.email)),r.a.createElement(A.a,{className:"p-2"},r.a.createElement(I.a,{className:"text-center justify-content-around"},r.a.createElement(W.a,{onClick:function(){Z(!0)},className:"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Reset Password  ",r.a.createElement(Gt.a,null)),r.a.createElement(W.a,{onClick:function(){_(!0)},className:"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Change Tagname ",r.a.createElement(_t.a,null)),r.a.createElement(W.a,{onClick:function(){R(!0)},className:"p-3 m-2 account-button",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"About ",r.a.createElement(Qt.a,null)),r.a.createElement(W.a,{onClick:function(){z(!0)},className:"p-3 m-2 account-button text-warning",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",minWidth:"150px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Privacy / Security Disclaimer ",r.a.createElement(ta.a,null)),r.a.createElement(W.a,{onClick:function(){P(!0)},className:"p-3 m-2 account-button text-danger",variant:"dark",style:{border:"none",backgroundColor:"#202020",padding:"15px",maxWidth:"150px",minHeight:"125px",maxHeight:"125px"}},"Delete Account ",r.a.createElement($t.a,null)))),r.a.createElement(A.a,null,s?r.a.createElement(I.a,{className:"text-center text-success lead"},v):""),r.a.createElement(A.a,null,u?r.a.createElement(I.a,null,r.a.createElement("ul",null,p.map((function(e){return r.a.createElement("li",{key:e,className:"text-center lead font-italic text-danger settings-error"},e)})))):"")))))}function ia(){return r.a.createElement("div",{className:"w-100 h-100"},r.a.createElement(la,null))}a(207),a(208),a(209);var ua=a(263);function ma(){var e=Object(m.c)(w),t=Object(m.b)(),a=Object(m.c)(Be),n=Date.now(),o=Object(u.g)();return-1!==a&&a<=n&&function(){var a=Object(i.a)(l.a.mark((function a(){var r,c,s;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("http://localhost:3000/api/auth/refresh",{credentials:"include"});case 2:return r=a.sent,a.next=5,r.json();case 5:if(c=a.sent,s=c.successful,!e.loggedIn||!0!==s){a.next=13;break}return console.success("Refresh token fetch successful"),t(He(n+9e5)),a.abrupt("return",!0);case 13:return console.error("Not logged in, not going to attempt refresh. Logging out."),console.error("Refresh token fetch failed. Logging out"),t(N()),t(h()),t(Ie()),t(J()),t(oe()),t(ge()),o.push("/login"),a.abrupt("return",!1);case 23:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()(),r.a.createElement(ua.a,null,r.a.createElement(u.d,null,r.a.createElement(u.b,{path:"/login",component:Je}),r.a.createElement(u.b,{path:"/forgotPassword",component:Ye}),r.a.createElement(u.b,{path:"/createAccount",component:Ve}),r.a.createElement(g,{path:"/home",component:Rt,auth:e.loggedIn}),r.a.createElement(g,{path:"/newConversation",component:Jt,auth:e.loggedIn}),r.a.createElement(g,{path:"/settings",component:ia,auth:e.loggedIn}),r.a.createElement(g,{path:"/",component:Rt,auth:e.loggedIn})))}var da=a(267),ga=a(266),pa=a(268),fa=(a(103),a(153)),ba=a.n(fa),ha=a(88),va=a.n(ha),Ea=a(270),ya=a(265),xa=a(264),Na=a(148),wa=a.n(Na),Oa=(a(210),a(146)),ja=a.n(Oa),ka=a(147),Ca=a.n(ka);function Sa(e){var t=e.account,a=e.currentConversation,n=e.isOnline,o=e.tagName,c=e.conversations,s=e.history,l=e.dispatch,i=Ue();return r.a.createElement(S.a,{className:"friend-list-item-row",fluid:!0},r.a.createElement(A.a,{className:"p-3"},r.a.createElement(I.a,{xs:"8",className:"".concat(n?"text-success":"text-danger"," py-auto font-italic text-sm text-center my-auto"),style:{opacity:.67}},r.a.createElement("span",{className:""},"@",o)),r.a.createElement(I.a,{xs:"4",className:"text-left"},r.a.createElement(W.a,{className:"dropdown-toggle text-white hidden-dropdown-friend-list-item",variant:"dark",style:{maxWidth:"50px",border:"none",backgroundColor:"#303030"},onClick:function(){return function(){if(c.length>0){var e,n=Object(j.a)(c);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(!1===r.pending){if("/home"!==location.pathname&&s.push("/home"),a.conversationName===r.conversationName){l(U(!1)),l(F(!1));break}r&&""!==r.conversationName&&i.width>768&&a.conversationName!==r.conversationName&&l(Oe(r.conversationName)),r&&""!==r.conversationName&&i.width<=768&&a.conversationName!==r.conversationName&&l(Oe("")),l(U(!1)),l(V({conversation:r})),l(F(!1)),Qe&&Qe.emit("setCurrentConversation",{user:t,conversationId:r.id},(function(){return console.log("Emitted setCurrentConversation successfully")}));break}}}catch(o){n.e(o)}finally{n.f()}}else location.pathname&&s.push("/newConversation")}()}},r.a.createElement(va.a,null)))))}function Aa(e){var t=e.requestId,a=e.tagName,n=Object(m.c)(w);return a===n.tagName?"":r.a.createElement(A.a,{className:"friend-request-list-item p-2"},r.a.createElement(I.a,{className:"text-small text-center my-auto",style:{opacity:.67}},"Friend request from @",a),r.a.createElement(I.a,{xs:"5",className:"text-center p-2",style:{opacity:.67}},r.a.createElement(W.a,{className:"button-bg mb-1 rounded-pill",style:{border:"none",color:"#97fa93",backgroundColor:"#191919",opacity:.9},onClick:function(){Pt&&(console.log("Emitted acceptFriendRequest"),Pt.emit("acceptFriendRequest",{friendRequestId:t},(function(){console.log("Successfully emitted accept friend request")})))}},r.a.createElement(Ct.a,{title:"Accept"},r.a.createElement(ja.a,null))),r.a.createElement(W.a,{className:"button-bg rounded-pill",style:{border:"none",color:"#bf2700",backgroundColor:"#191919"},onClick:function(){return alert("Decline friend request")}},r.a.createElement(Ct.a,{title:"Decline"},r.a.createElement(Ca.a,null)))))}function Ia(e){var t=e.sender,a=e.inviteId,n=e.convId;Object(m.c)(w);return r.a.createElement(A.a,{className:"p-3 invite-hover"},r.a.createElement(I.a,{className:"text-small text-muted text-center my-auto",style:{opacity:.67}},"Chat with ","".concat(t).length>10?"".concat(t).substring(0,7)+"...":"".concat(t)),r.a.createElement(I.a,{xs:"5",className:"text-center",style:{opacity:.67}},r.a.createElement(W.a,{className:"btn-sm mb-1 rounded-pill",style:{border:"none",color:"#97fa93",backgroundColor:"#191919",opacity:.9},onClick:function(){Pt&&(console.log("Attempting to emit acceptInvite event to server for invite with id ".concat(a)),Pt.emit("acceptInvite",{inviteId:a,conversationId:n},(function(){console.log("Successfully emitted acceptInvite event to server for invite with id ".concat(a))})))}},"Accept"),r.a.createElement(W.a,{className:"btn-sm rounded-pill",style:{border:"none",color:"#bf2700",backgroundColor:"#191919"}},"Decline")))}function Ra(e){e.convId;var t=e.sender,a=Object(m.c)(X),o=Object(n.useState)(""),c=Object(C.a)(o,2),s=c[0],l=c[1];Object(n.useEffect)((function(){var e;if(a&&Array.isArray(a)){var n,r=Object(j.a)(a);try{for(r.s();!(n=r.n()).done;){var o,c=n.value,s=Object(j.a)(c.users);try{for(s.s();!(o=s.n()).done;){var i=o.value;if(i.id===t){e=JSON.parse(JSON.stringify(i));break}}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}}e.tagName&&l(e.tagName)}),[]);return r.a.createElement(A.a,{className:"p-3 accepted-list-item"},r.a.createElement(I.a,{className:"text-small text-center my-auto",style:{opacity:.67}},"Chat with ","".concat(s).length>10?"".concat(s).substring(0,7)+"...":"".concat(s)),r.a.createElement(I.a,{xs:"5",className:"text-center pr-2",style:{opacity:.67}},r.a.createElement(W.a,{onClick:function(){alert("Todo")},className:"btn-sm mb-1 rounded-pill button-bg",style:{border:"none",backgroundColor:"#191919",opacity:.9}},r.a.createElement(Ct.a,{title:"Delete"},r.a.createElement(it.a,null)))))}var Ma=a(150),Ta=a.n(Ma),Wa=a(95),Ha=a.n(Wa),Pa=a(149),Ba=a.n(Pa),Da=a(151),La=a.n(Da),za=a(152),qa=a.n(za);function Fa(){var e=Object(m.b)(),t=Object(u.g)(),a=Object(m.c)(Re),o=Object(m.c)(w),c=Object(m.c)(be),s=Object(m.c)(X),d=Object(n.useState)(""),g=Object(C.a)(d,2),p=g[0],f=g[1],b=Object(n.useState)(""),h=Object(C.a)(b,2),v=h[0],E=h[1],y=Object(n.useState)(""),x=Object(C.a)(y,2),N=x[0],O=(x[1],Object(n.useState)(!1)),k=Object(C.a)(O,2),R=k[0],H=k[1],B=Object(n.useState)(!1),D=Object(C.a)(B,2),L=D[0],z=D[1],q=Object(n.useState)(null),F=Object(C.a)(q,2),J=F[0],U=F[1],Z=Object(n.useState)(!1),Y=Object(C.a)(Z,2),$=Y[0],V=Y[1],_=Object(n.useState)(!1),K=Object(C.a)(_,2),G=K[0],ee=K[1],te=Object(n.useRef)([]),ae=Object(m.c)(Q),ne=function(){var e=!0;return te.current=[],!1===P.tagName.test(p)&&(e=!1,te.current.push("Invalid tagname. Try 8-24 letters, numbers, dashes, underscores")),c.filter((function(e){return e.tagName===p})).length>0&&(e=!1,te.current.push("Friend already exists")),e||z(!0),e},re=function(){if(z(!1),H(!1),te.current&&!1!==Array.isArray(te.current)&&0===te.current.length||(te.current=[]),V(!1),!1===function(){var e=!0;return te.current=[],!1===P.tagNameSearch.test(v)&&(e=!1,te.current.push("Invalid friend name")),o.tagName===v&&(e=!1,te.current.push("Cannot search/send self")),e||z(!0),e}())return console.log("Error searching friend's list, invalid tag name!"),void V(!0);console.log("Filtering friend's list by tagname | ".concat(p)),c.length>1&&U(c.filter((function(e){return e.tagName.includes(v)||v.includes(e.tagName)})))},oe=function(){var e=Object(i.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(z(!1),H(!1),te.current&&!1!==Array.isArray(te.current)&&0===te.current.length||(te.current=[]),ee(!1),!1!==ne()){e.next=8;break}return console.log("Error cannot send friend request",te),ee(!0),e.abrupt("return");case 8:a&&o&&Pt?Pt.emit("sendFriendRequest",{senderId:o.id,recipientId:p},(function(){console.log("Friend request sent to user @".concat(p))})):console.log("Error sending friend request, not connected to notifications socket");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(ot.a,{className:"ml-3 p-1",style:{backgroundColor:"#191919"}},r.a.createElement(Ct.a,{title:"Friends List"},r.a.createElement(ot.a.Toggle,{as:"button",style:{border:"none",color:"white",backgroundColor:"#191919"},className:"top-dropdown-button font-weight-bold rounded-pill ml-2"},r.a.createElement(wa.a,null))),r.a.createElement(ot.a.Menu,{style:{backgroundColor:"#191919",minWidth:"325px"},className:"dropdown-menu-custom-bg"},r.a.createElement(ot.a.ItemText,{className:"text-center font-weight-bold lead mb-1",style:{backgroundColor:"#191919",opacity:.9,color:"#AAAAAA"}},r.a.createElement(Ba.a,null),"\xa0\xa0Friends"),r.a.createElement(S.a,{fluid:!0,className:"h-100",style:{backgroundColor:"#191919",minWidth:"325px",paddingTop:"20px"}},r.a.createElement(A.a,{className:"m-1"},r.a.createElement(I.a,{xs:"10"},r.a.createElement(M.a,null,r.a.createElement(T.a,{style:{marginLeft:"auto",maxWidth:"250px",marginRight:"auto",color:"white",opacity:.87,minWidth:"200px",minHeight:"50px",backgroundColor:"#202020",border:"none"},placeholder:"Add Friend By Tagname","aria-label":"Add Friend By Tagname","aria-describedby":"basic-addon1",className:G?"search-friend-bar error-placeholder":"search-friend-bar",onChange:function(e){f(e.target.value)}}))),r.a.createElement(I.a,{xs:"2"},r.a.createElement(W.a,{variant:"dark",className:"mr-3 pr-2",style:{display:"block",marginRight:"auto",marginLeft:"-15px",backgroundColor:"#191919",border:"none",color:"#555555"},onClick:function(){return oe()},disabled:p.length<8},r.a.createElement(Ta.a,{className:G?"error-icon":"",style:{height:30,width:30,color:"#AAAAAA"}})))),r.a.createElement(A.a,{className:"m-1 mt-2 mb-2 mb-1 pb-3"},r.a.createElement(I.a,{xs:"10"},r.a.createElement(M.a,null,r.a.createElement(T.a,{style:{marginLeft:"auto",maxWidth:"250px",marginRight:"auto",color:"white",opacity:.87,minWidth:"200px",minHeight:"50px",backgroundColor:"#202020",border:"none"},placeholder:"Search Friends...","aria-label":"Search Friends...","aria-describedby":"basic-addon1",className:$?"search-friend-bar error-placeholder":"search-friend-bar",onChange:function(e){E(e.target.value)}}))),r.a.createElement(I.a,{xs:"2"},r.a.createElement(W.a,{variant:"dark",style:{display:"block",marginRight:"auto",marginLeft:"-15px",backgroundColor:"#191919",border:"none",color:"#555555"},onClick:function(){return re()}},r.a.createElement(kt.a,{className:$?"error-icon":"",style:{height:30,width:30,color:"#AAAAAA"}})))),r.a.createElement(A.a,{style:{maxWidth:"250px",minWidth:"250px",overflowY:"scroll",marginRight:"auto",marginLeft:"15px"},className:"mt-1 pb-1"},r.a.createElement(I.a,{style:{maxHeight:"190px"}},Array.isArray(J)?J.map((function(a){var n=[];if(s&&Array.isArray(s)){var c,l=Object(j.a)(s);try{for(l.s();!(c=l.n()).done;){var i=c.value;if(i.users&&Array.isArray(i.users)){var u,m=Object(j.a)(i.users);try{for(m.s();!(u=m.n()).done;){if(u.value.tagName===a.tagName){n.push(i);break}}}catch(d){m.e(d)}finally{m.f()}}}}catch(d){l.e(d)}finally{l.f()}}return a&&a.tagName?r.a.createElement(A.a,{key:a.tagName,style:{maxHeight:"65px",backgroundColor:"#505050"},className:"friend-topbar"},r.a.createElement(Sa,{account:o,currentConversation:ae,history:t,dispatch:e,conversations:n,key:a.tagName,tagName:a.tagName,isOnline:a.isOnline})):null})):c.map((function(a){if(a&&a.tagName){var n=[];if(s&&Array.isArray(s)){var c,l=Object(j.a)(s);try{for(l.s();!(c=l.n()).done;){var i=c.value;if(i.users&&Array.isArray(i.users)){var u,m=Object(j.a)(i.users);try{for(m.s();!(u=m.n()).done;){if(u.value.tagName===a.tagName){n.push(i);break}}}catch(d){m.e(d)}finally{m.f()}}}}catch(d){l.e(d)}finally{l.f()}}return r.a.createElement(A.a,{key:a.tagName,style:{maxHeight:"65px",backgroundColor:"#505050"},className:"friend-topbar"},r.a.createElement(Sa,{account:o,currentConversation:ae,history:t,dispatch:e,conversations:n,key:a.tagName,tagName:a.tagName,isOnline:a.isOnline}))}return null}))))),L?r.a.createElement(S.a,{fluid:!0,className:"text-left lead",style:{opacity:.9}},r.a.createElement(A.a,{className:"font-italic text-danger",style:{margin:"20px",borderBottom:"1px solid red",opacity:.87}},"Errors:"),r.a.createElement(A.a,null,r.a.createElement("ul",null,te.current.map((function(e){return r.a.createElement("li",{className:"text-danger text-small",key:e},e)}))))):"",R?r.a.createElement(S.a,{fluid:!0,className:"text-left",style:{opacity:.9}},r.a.createElement(A.a,{className:"font-italic text-success",style:{margin:"20px",opacity:.87}},N)):""))}function Ja(){var e=Object(m.c)(le),t=Object(m.c)(he),a=Object(m.c)(ie),n=Object(m.c)(w);return r.a.createElement(ot.a,{className:"ml-3 p-1 topbar-dropdown",style:{backgroundColor:"#191919",opacity:.95}},r.a.createElement(Ct.a,{title:"Notifications"},r.a.createElement(ot.a.Toggle,{as:"button",style:{border:"none",color:"white",backgroundColor:"#191919"},className:"top-dropdown-button font-weight-bold rounded-pill ml-2"},e.length>=1||t.length>=1?r.a.createElement(xa.a,{color:"default",overlap:"circle",badgeContent:" ",variant:"dot"},r.a.createElement(Ha.a,null)):r.a.createElement(Ha.a,null))),r.a.createElement(ot.a.Menu,{className:"dropdown-menu-custom-bg",style:{backgroundColor:"#191919",minWidth:"350px"}},r.a.createElement(ot.a.ItemText,{className:"text-center font-weight-bold lead p-3 pb-2",style:{opacity:.9,color:"#AAAAAA"}},r.a.createElement(Ha.a,null),"\xa0\xa0Notifications"),r.a.createElement(S.a,{fluid:!0,style:{maxHeight:"250px",minHeight:"250px",minWidth:"250px",overflowY:"scroll"}},r.a.createElement(Ea.a,{className:"tabs-notifications",defaultActiveKey:"received",id:"uncontrolled-tab-example"},r.a.createElement(ya.a,{className:"tab-notifications",eventKey:"received",title:"Received"},t.filter((function(e){return e.recipientId===n.id})).map((function(e){return e&&!1===e.accepted&&!1===e.cancelled&&e.sender.id!==n.id?r.a.createElement(Aa,{requestId:e.id,recipientId:e.recipientId,sender:e.sender,tagName:e.sender.tagName,key:"".concat(e.id)}):null})),e.map((function(e){return r.a.createElement(Ia,{sender:e.sender?e.sender:"".concat(e.senderId),key:"".concat(Math.random()),convId:"".concat(e.conversationId),inviteId:"".concat(e.id)})}))),r.a.createElement(ya.a,{eventKey:"accepted",title:"Accepted"},a.map((function(e){return r.a.createElement(Ra,{sender:"".concat(e.senderId),key:"".concat(Math.random()),convId:"".concat(e.conversationId),inviteId:"".concat(e.id)})})))))))}function Ua(){var e=Object(m.b)();return r.a.createElement(ot.a,{className:"topbar-dropdown",style:{backgroundColor:"#191919",position:"relative",maxWidth:"100px",opacity:.9}},r.a.createElement(ot.a.Toggle,{className:"dropdown-toggle text-white",style:{border:" none",backgroundColor:"#191919"},as:"button",id:"dropdown-custom-2"},r.a.createElement(st.a,null)),r.a.createElement(ot.a.Menu,{className:"dropdown-menu-custom-bg-settings",style:{backgroundColor:"#191919",maxWidth:"100px"}},r.a.createElement(ot.a.Item,{className:"text-white text-center dropdown-item-settings",style:{backgroundColor:"#404040",padding:"15px"},as:"button",onClick:function(){return document.querySelector("#accountSettings").click()}},r.a.createElement(H.b,{id:"accountSettings",as:"button",style:{textDecoration:"none",color:"#AAAAAA"},to:"/settings"},"Account\xa0",r.a.createElement(La.a,null))),r.a.createElement(ot.a.Item,{className:"text-white text-center dropdown-item-settings",style:{backgroundColor:"#404040",padding:"15px"},as:"button",onClick:function(){e(N()),e(h()),e(Ie()),e(J()),e(oe()),e(ge()),console.log("Successfully logged out")}},r.a.createElement(H.b,{style:{textDecoration:"none",color:"#AAAAAA"},to:"/login"},"Logout\xa0",r.a.createElement(qa.a,null)))))}var Za=Object(wt.a)((function(e){return{root:{display:"flex",flexGrow:1,backgroundColor:"#191919",height:"100%",opacity:.87},appBar:{zIndex:e.zIndex.drawer+1,backgroundColor:"#191919"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,color:"white"},menu:{backgroundColor:"#404040"}}}));function Ya(){var e=Object(m.c)(ee),t=Object(m.c)(te),a=Object(m.b)();return r.a.createElement("div",null,r.a.createElement(H.b,{id:"startChat",style:{display:"none"},to:"/newConversation"}),r.a.createElement(W.a,{onClick:Object(i.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&a(F(!1)),e&&a(U(!1)),document.getElementById("startChat").click();case 3:case"end":return n.stop()}}),n)}))),variant:"primary",className:"rounded-pill mx-auto my-form-control-button",style:{opacity:.75,boxShadow:"black 5px 5px "}},r.a.createElement(va.a,null)," Start chat"))}function $a(){var e=Ue(),t=Za(),a=Object(m.c)(w),n=Object(m.b)(),o=e.width<768,c=(Object(m.c)(Q),Object(m.c)(ee),Object(m.c)(te)),s=Object(u.h)(),l=Object(m.c)(ke);return r.a.createElement(ga.a,null,r.a.createElement(da.a,{position:"fixed",className:t.appBar},r.a.createElement(Nt.a,null,r.a.createElement(pa.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu"}),r.a.createElement(dt.a,{component:"span",className:t.title},r.a.createElement(S.a,{fluid:!0},r.a.createElement(A.a,{className:"text-center"},a.loggedIn&&o&&!c?r.a.createElement(W.a,{style:{backgroundColor:"#191919",border:"none"},onClick:function(){n(F(!c))}},r.a.createElement(ba.a,null)):"",a.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ya,null),r.a.createElement(Ja,null),r.a.createElement(Fa,null)):""))),e.width>768?r.a.createElement(dt.a,{component:"span",variant:"h4",className:t.title},r.a.createElement("span",{style:{opacity:.67},className:"text-white lead"},l)):"",!1===a.loggedIn&&"/login"!==s.pathname?r.a.createElement(H.b,{className:"rounded-pill btn btn-outline-primary mr-5 rounded-pill",style:{opacity:.67},renderas:W.a,to:"/login"},"Login"):"",a.loggedIn?r.a.createElement(Ua,null):"")))}c.a.render(r.a.createElement("div",{className:"base-div",style:{backgroundColor:"#191919"}},r.a.createElement(r.a.StrictMode,null,r.a.createElement(m.a,{store:Le},r.a.createElement(H.a,{basename:"/client/"},r.a.createElement(n.Suspense,{fallback:null},r.a.createElement($a,null),r.a.createElement(ma,null)))))),document.getElementById("root"))},64:function(e,t,a){}},[[162,1,2]]]);
//# sourceMappingURL=main.79abfae2.chunk.js.map